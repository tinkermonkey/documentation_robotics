# Invalid Data Model layer fixture - Tests various malformed source references
# Should fail validation due to:
# - Invalid provenance values
# - Missing required locations array
# - Empty locations array
# - Invalid commit SHA format

json-schemas:
  # Invalid provenance value
  - id: "dm-schema-invalid-001"
    name: "Invalid Provenance Schema"
    $schema: "http://json-schema.org/draft-07/schema#"
    $id: "https://example.com/invalid-provenance.json"
    type: "object"
    title: "InvalidProvenance"
    description: "Schema with invalid provenance"
    x-source-reference:
      provenance: "auto_generated"  # Should be: extracted, manual, inferred, or generated
      locations:
        - file: "src/models/invalid.py"

  # Missing locations array
  - id: "dm-schema-invalid-002"
    name: "Missing Locations Schema"
    $schema: "http://json-schema.org/draft-07/schema#"
    $id: "https://example.com/missing-locations.json"
    type: "object"
    title: "MissingLocations"
    description: "Schema with missing locations"
    x-source-reference:
      provenance: "manual"
      # locations is required but missing

  # Empty locations array
  - id: "dm-schema-invalid-003"
    name: "Empty Locations Schema"
    $schema: "http://json-schema.org/draft-07/schema#"
    $id: "https://example.com/empty-locations.json"
    type: "object"
    title: "EmptyLocations"
    description: "Schema with empty locations"
    x-source-reference:
      provenance: "extracted"
      locations: []  # Array must not be empty

  # Invalid commit SHA - too long
  - id: "dm-schema-invalid-004"
    name: "Invalid Commit SHA Long"
    $schema: "http://json-schema.org/draft-07/schema#"
    $id: "https://example.com/invalid-commit-long.json"
    type: "object"
    title: "InvalidCommitLong"
    description: "Schema with too-long commit SHA"
    x-source-reference:
      provenance: "extracted"
      locations:
        - file: "src/models/test.py"
      repository:
        url: "https://github.com/example/repo.git"
        commit: "abcdef1234567890abcdef1234567890abcdef12345"  # Too long (45 chars instead of 40)

  # Invalid commit SHA - uppercase (must be lowercase)
  - id: "dm-schema-invalid-005"
    name: "Invalid Commit SHA Case"
    $schema: "http://json-schema.org/draft-07/schema#"
    $id: "https://example.com/invalid-commit-case.json"
    type: "object"
    title: "InvalidCommitCase"
    description: "Schema with uppercase commit SHA"
    x-source-reference:
      provenance: "extracted"
      locations:
        - file: "src/models/test.py"
      repository:
        url: "https://github.com/example/repo.git"
        commit: "ABCDEF1234567890ABCDEF1234567890ABCDEF12"  # Must be lowercase hex

  # Missing required file field in location
  - id: "dm-schema-invalid-006"
    name: "Missing File Field"
    $schema: "http://json-schema.org/draft-07/schema#"
    $id: "https://example.com/missing-file.json"
    type: "object"
    title: "MissingFile"
    description: "Schema with location missing file field"
    x-source-reference:
      provenance: "extracted"
      locations:
        - symbol: "TestClass"  # Missing required 'file' field
