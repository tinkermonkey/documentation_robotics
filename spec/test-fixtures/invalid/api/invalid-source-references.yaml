# Invalid API layer fixture - Tests various malformed source references
# Should fail validation due to:
# - Invalid provenance values
# - Missing required locations array
# - Empty locations array
# - Invalid commit SHA format

operations:
  # Invalid provenance value
  - id: "api-op-invalid-001"
    name: "Invalid Provenance Operation"
    operationId: "invalidProvenance"
    summary: "Operation with invalid provenance"
    description: "Should fail validation"
    tags: "test"
    x-source-reference:
      provenance: "invalid_value" # Should be: extracted, manual, inferred, or generated
      locations:
        - file: "src/test.py"
          symbol: "test_func"

  # Missing locations array
  - id: "api-op-invalid-002"
    name: "Missing Locations Operation"
    operationId: "missingLocations"
    summary: "Operation with missing locations"
    description: "Should fail validation"
    tags: "test"
    x-source-reference:
      provenance: "extracted"
      # locations is required but missing

  # Empty locations array
  - id: "api-op-invalid-003"
    name: "Empty Locations Operation"
    operationId: "emptyLocations"
    summary: "Operation with empty locations"
    description: "Should fail validation"
    tags: "test"
    x-source-reference:
      provenance: "extracted"
      locations: [] # Array must not be empty

  # Invalid commit SHA - too short
  - id: "api-op-invalid-004"
    name: "Invalid Commit SHA Operation"
    operationId: "invalidCommitShort"
    summary: "Operation with short commit SHA"
    description: "Should fail validation"
    tags: "test"
    x-source-reference:
      provenance: "extracted"
      locations:
        - file: "src/test.py"
      repository:
        url: "https://github.com/example/repo.git"
        commit: "abc123" # Must be 40 hex characters

  # Invalid commit SHA - non-hex characters
  - id: "api-op-invalid-005"
    name: "Invalid Commit SHA Characters"
    operationId: "invalidCommitChars"
    summary: "Operation with non-hex commit SHA"
    description: "Should fail validation"
    tags: "test"
    x-source-reference:
      provenance: "extracted"
      locations:
        - file: "src/test.py"
      repository:
        url: "https://github.com/example/repo.git"
        commit: "gggggggggggggggggggggggggggggggggggggggg" # Contains 'g' which is not hex

path-items:
  # Missing required location.file field
  - id: "api-path-invalid-001"
    name: "Invalid Path Missing File"
    servers: "server-test"
    x-source-reference:
      provenance: "extracted"
      locations:
        - symbol: "test_route" # Missing required 'file' field
