{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://example.com/schemas/federated-architecture.json",
  "title": "Federated Architecture Metadata Model",
  "description": "Complete federated architecture model integrating 11 layers from motivation through observability",
  "type": "object",
  "required": ["version", "architecture"],
  "properties": {
    "version": {
      "type": "string",
      "description": "Metadata model version",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "architecture": {
      "$ref": "#/definitions/Architecture"
    }
  },
  "definitions": {
    "Architecture": {
      "type": "object",
      "required": ["metadata", "layers"],
      "properties": {
        "metadata": {
          "$ref": "#/definitions/ArchitectureMetadata"
        },
        "layers": {
          "$ref": "#/definitions/Layers"
        },
        "crossLayerReferences": {
          "type": "array",
          "items": { "$ref": "#/definitions/CrossLayerReference" },
          "description": "Explicit cross-layer references and traceability links"
        }
      }
    },
    "ArchitectureMetadata": {
      "type": "object",
      "required": ["name"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Architecture name"
        },
        "description": {
          "type": "string"
        },
        "organization": {
          "type": "string"
        },
        "created": {
          "type": "string",
          "format": "date-time"
        },
        "modified": {
          "type": "string",
          "format": "date-time"
        },
        "authors": {
          "type": "array",
          "items": { "type": "string" }
        },
        "stakeholders": {
          "type": "array",
          "items": { "type": "string" }
        },
        "status": {
          "type": "string",
          "enum": ["draft", "review", "approved", "implemented", "deprecated"]
        },
        "tags": {
          "type": "array",
          "items": { "type": "string" }
        }
      }
    },
    "Layers": {
      "type": "object",
      "properties": {
        "motivationLayer": {
          "type": "object",
          "description": "Layer 01: WHY - Goals, requirements, stakeholders, constraints",
          "properties": {
            "spec": {
              "type": "string",
              "description": "Path to motivation layer spec file"
            },
            "schema": {
              "type": "string",
              "const": "01-motivation-layer.schema.json"
            },
            "standard": {
              "type": "string",
              "const": "ArchiMate 3.2 Motivation Layer"
            },
            "data": {
              "$ref": "01-motivation-layer.schema.json"
            }
          }
        },
        "businessLayer": {
          "type": "object",
          "description": "Layer 02: WHAT - Business services, processes, actors",
          "properties": {
            "spec": {
              "type": "string",
              "description": "Path to business layer spec file"
            },
            "schema": {
              "type": "string",
              "const": "02-business-layer.schema.json"
            },
            "standard": {
              "type": "string",
              "const": "ArchiMate 3.2 Business Layer"
            },
            "data": {
              "$ref": "02-business-layer.schema.json"
            }
          }
        },
        "securityLayer": {
          "type": "object",
          "description": "Layer 03: WHO CAN - Cross-cutting access control and policies",
          "properties": {
            "spec": {
              "type": "string",
              "description": "Path to security layer spec file"
            },
            "schema": {
              "type": "string",
              "const": "03-security-layer.schema.json"
            },
            "standard": {
              "type": "string",
              "const": "Custom Security Model"
            },
            "data": {
              "$ref": "03-security-layer.schema.json"
            }
          }
        },
        "applicationLayer": {
          "type": "object",
          "description": "Layer 04: HOW - Software applications and services",
          "properties": {
            "spec": {
              "type": "string",
              "description": "Path to application layer spec file"
            },
            "schema": {
              "type": "string",
              "const": "04-application-layer.schema.json"
            },
            "standard": {
              "type": "string",
              "const": "ArchiMate 3.2 Application Layer"
            },
            "data": {
              "$ref": "04-application-layer.schema.json"
            }
          }
        },
        "technologyLayer": {
          "type": "object",
          "description": "Layer 05: WITH WHAT - Platforms, frameworks, design constraints",
          "properties": {
            "spec": {
              "type": "string",
              "description": "Path to technology layer spec file"
            },
            "schema": {
              "type": "string",
              "const": "05-technology-layer.schema.json"
            },
            "standard": {
              "type": "string",
              "const": "ArchiMate 3.2 Technology Layer"
            },
            "data": {
              "$ref": "05-technology-layer.schema.json"
            }
          }
        },
        "apiLayer": {
          "type": "object",
          "description": "Layer 06: INTERFACE - Service contracts and protocols",
          "properties": {
            "specs": {
              "type": "array",
              "items": {
                "type": "string",
                "description": "Path to OpenAPI spec files"
              }
            },
            "schema": {
              "type": "string",
              "const": "06-api-layer.schema.json"
            },
            "standard": {
              "type": "string",
              "const": "OpenAPI 3.0"
            },
            "data": {
              "type": "array",
              "items": {
                "$ref": "06-api-layer.schema.json"
              }
            }
          }
        },
        "dataModelLayer": {
          "type": "object",
          "description": "Layer 07: STRUCTURE - Logical data definitions",
          "properties": {
            "schemas": {
              "type": "array",
              "items": {
                "type": "string",
                "description": "Path to JSON Schema files"
              }
            },
            "schema": {
              "type": "string",
              "const": "07-data-model-layer.schema.json"
            },
            "standard": {
              "type": "string",
              "const": "JSON Schema Draft 7"
            },
            "data": {
              "type": "array",
              "items": {
                "$ref": "07-data-model-layer.schema.json"
              }
            }
          }
        },
        "dataStoreLayer": {
          "type": "object",
          "description": "Layer 08: STORAGE - Physical database schemas",
          "properties": {
            "specs": {
              "type": "array",
              "items": {
                "type": "string",
                "description": "Path to database DDL files"
              }
            },
            "schema": {
              "type": "string",
              "const": "08-datastore-layer.schema.json"
            },
            "standard": {
              "type": "string",
              "const": "SQL DDL + Extensions"
            },
            "data": {
              "$ref": "08-datastore-layer.schema.json"
            }
          }
        },
        "uxLayer": {
          "type": "object",
          "description": "Layer 09: PRESENTATION - User interface specifications",
          "properties": {
            "specs": {
              "type": "array",
              "items": {
                "type": "string",
                "description": "Path to UX spec files"
              }
            },
            "schema": {
              "type": "string",
              "const": "09-ux-layer.schema.json"
            },
            "standard": {
              "type": "string",
              "const": "Custom UX Specification"
            },
            "data": {
              "type": "array",
              "items": {
                "$ref": "09-ux-layer.schema.json"
              }
            }
          }
        },
        "navigationLayer": {
          "type": "object",
          "description": "Layer 10: FLOW - User navigation and routing",
          "properties": {
            "spec": {
              "type": "string",
              "description": "Path to navigation spec file"
            },
            "schema": {
              "type": "string",
              "const": "10-navigation-layer.schema.json"
            },
            "standard": {
              "type": "string",
              "const": "Custom Navigation Specification"
            },
            "data": {
              "$ref": "10-navigation-layer.schema.json"
            }
          }
        },
        "apmObservabilityLayer": {
          "type": "object",
          "description": "Layer 11: OBSERVE - Monitoring and tracing",
          "properties": {
            "specs": {
              "type": "array",
              "items": {
                "type": "string",
                "description": "Path to APM config files"
              }
            },
            "schema": {
              "type": "string",
              "const": "11-apm-observability-layer.schema.json"
            },
            "standard": {
              "type": "string",
              "const": "OpenTelemetry 1.0+"
            },
            "data": {
              "type": "array",
              "items": {
                "$ref": "11-apm-observability-layer.schema.json"
              }
            }
          }
        }
      }
    },
    "CrossLayerReference": {
      "type": "object",
      "required": ["sourceLayer", "sourceElement", "targetLayer", "targetElement", "referenceType"],
      "properties": {
        "sourceLayer": {
          "type": "string",
          "enum": ["motivation", "business", "security", "application", "technology", "api", "dataModel", "dataStore", "ux", "navigation", "apm"]
        },
        "sourceElement": {
          "type": "string",
          "format": "uuid",
          "description": "Source element ID or reference path"
        },
        "targetLayer": {
          "type": "string",
          "enum": ["motivation", "business", "security", "application", "technology", "api", "dataModel", "dataStore", "ux", "navigation", "apm"]
        },
        "targetElement": {
          "type": "string",
          "description": "Target element ID or reference path"
        },
        "referenceType": {
          "type": "string",
          "enum": ["archimate-ref", "spec-ref", "schema-ref", "api-operation", "data-binding", "navigation-target", "trace-span", "realizes", "triggers", "uses", "custom"]
        },
        "description": {
          "type": "string"
        },
        "properties": {
          "type": "object",
          "additionalProperties": { "type": "string" }
        }
      }
    }
  },
  "examples": [
    {
      "version": "1.0.0",
      "architecture": {
        "metadata": {
          "name": "Product Management System",
          "description": "Federated architecture for product catalog and inventory management",
          "organization": "Example Corp",
          "created": "2025-01-01T00:00:00Z",
          "modified": "2025-01-15T12:00:00Z",
          "authors": ["Architecture Team"],
          "stakeholders": ["Product Team", "Engineering Team", "Business Stakeholders"],
          "status": "approved",
          "tags": ["ecommerce", "inventory", "catalog"]
        },
        "layers": {
          "motivationLayer": {
            "spec": "architecture/motivation.yaml",
            "schema": "01-motivation-layer.schema.json",
            "standard": "ArchiMate 3.2 Motivation Layer"
          },
          "businessLayer": {
            "spec": "architecture/business.yaml",
            "schema": "02-business-layer.schema.json",
            "standard": "ArchiMate 3.2 Business Layer"
          },
          "securityLayer": {
            "spec": "specs/security/security-model.yaml",
            "schema": "03-security-layer.schema.json",
            "standard": "Custom Security Model"
          },
          "applicationLayer": {
            "spec": "architecture/application.yaml",
            "schema": "04-application-layer.schema.json",
            "standard": "ArchiMate 3.2 Application Layer"
          },
          "technologyLayer": {
            "spec": "architecture/technology.yaml",
            "schema": "05-technology-layer.schema.json",
            "standard": "ArchiMate 3.2 Technology Layer"
          },
          "apiLayer": {
            "specs": [
              "specs/api/product-api.yaml",
              "specs/api/inventory-api.yaml"
            ],
            "schema": "06-api-layer.schema.json",
            "standard": "OpenAPI 3.0"
          },
          "dataModelLayer": {
            "schemas": [
              "specs/schemas/product.json",
              "specs/schemas/inventory.json"
            ],
            "schema": "07-data-model-layer.schema.json",
            "standard": "JSON Schema Draft 7"
          },
          "dataStoreLayer": {
            "specs": [
              "database/migrations/",
              "database/schema.sql"
            ],
            "schema": "08-datastore-layer.schema.json",
            "standard": "SQL DDL + Extensions"
          },
          "uxLayer": {
            "specs": [
              "specs/ux/product-list.ux.yaml",
              "specs/ux/product-edit.ux.yaml"
            ],
            "schema": "09-ux-layer.schema.json",
            "standard": "Custom UX Specification"
          },
          "navigationLayer": {
            "spec": "specs/navigation/product-navigation.yaml",
            "schema": "10-navigation-layer.schema.json",
            "standard": "Custom Navigation Specification"
          },
          "apmObservabilityLayer": {
            "specs": [
              "specs/apm/product-service-apm.yaml"
            ],
            "schema": "11-apm-observability-layer.schema.json",
            "standard": "OpenTelemetry 1.0+"
          }
        },
        "crossLayerReferences": [
          {
            "sourceLayer": "application",
            "sourceElement": "app-comp-product-service",
            "targetLayer": "api",
            "targetElement": "specs/api/product-api.yaml",
            "referenceType": "spec-ref",
            "description": "Product service implements Product API"
          },
          {
            "sourceLayer": "ux",
            "sourceElement": "product-edit-experience",
            "targetLayer": "dataModel",
            "targetElement": "specs/schemas/product.json#/properties/name",
            "referenceType": "data-binding",
            "description": "Product name component binds to schema"
          },
          {
            "sourceLayer": "navigation",
            "sourceElement": "product-detail",
            "targetLayer": "ux",
            "targetElement": "specs/ux/product-detail.ux.yaml",
            "referenceType": "navigation-target",
            "description": "Route displays product detail experience"
          }
        ]
      }
    }
  ]
}
