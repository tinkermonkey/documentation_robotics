{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://example.com/schemas/09-ux-layer.schema.json",
  "title": "Ux Layer Schema",
  "description": "Schema for Ux Layer",
  "type": "object",
  "properties": {
    "ux-libraries": {
      "type": "array",
      "description": "Collection of UXLibrary entities",
      "items": {
        "$ref": "#/definitions/UXLibrary"
      }
    },
    "library-components": {
      "type": "array",
      "description": "Collection of LibraryComponent entities",
      "items": {
        "$ref": "#/definitions/LibraryComponent"
      }
    },
    "library-sub-views": {
      "type": "array",
      "description": "Collection of LibrarySubView entities",
      "items": {
        "$ref": "#/definitions/LibrarySubView"
      }
    },
    "state-patterns": {
      "type": "array",
      "description": "Collection of StatePattern entities",
      "items": {
        "$ref": "#/definitions/StatePattern"
      }
    },
    "action-patterns": {
      "type": "array",
      "description": "Collection of ActionPattern entities",
      "items": {
        "$ref": "#/definitions/ActionPattern"
      }
    },
    "ux-applications": {
      "type": "array",
      "description": "Collection of UXApplication entities",
      "items": {
        "$ref": "#/definitions/UXApplication"
      }
    },
    "ux-specs": {
      "type": "array",
      "description": "Collection of UXSpec entities",
      "items": {
        "$ref": "#/definitions/UXSpec"
      }
    },
    "experience-states": {
      "type": "array",
      "description": "Collection of ExperienceState entities",
      "items": {
        "$ref": "#/definitions/ExperienceState"
      }
    },
    "state-actions": {
      "type": "array",
      "description": "Collection of StateAction entities",
      "items": {
        "$ref": "#/definitions/StateAction"
      }
    },
    "state-transitions": {
      "type": "array",
      "description": "Collection of StateTransition entities",
      "items": {
        "$ref": "#/definitions/StateTransition"
      }
    },
    "conditions": {
      "type": "array",
      "description": "Collection of Condition entities",
      "items": {
        "$ref": "#/definitions/Condition"
      }
    },
    "views": {
      "type": "array",
      "description": "Collection of View entities",
      "items": {
        "$ref": "#/definitions/View"
      }
    },
    "sub-views": {
      "type": "array",
      "description": "Collection of SubView entities",
      "items": {
        "$ref": "#/definitions/SubView"
      }
    },
    "component-instances": {
      "type": "array",
      "description": "Collection of ComponentInstance entities",
      "items": {
        "$ref": "#/definitions/ComponentInstance"
      }
    },
    "action-components": {
      "type": "array",
      "description": "Collection of ActionComponent entities",
      "items": {
        "$ref": "#/definitions/ActionComponent"
      }
    },
    "validation-rules": {
      "type": "array",
      "description": "Collection of ValidationRule entities",
      "items": {
        "$ref": "#/definitions/ValidationRule"
      }
    }
  },
  "definitions": {
    "UXLibrary": {
      "type": "object",
      "description": "Collection of reusable UI components and sub-views that can be shared across applications",
      "required": [
        "id",
        "name",
        "version"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "version": {
          "type": "string",
          "minLength": 1
        },
        "description": {
          "type": "string",
          "minLength": 1
        },
        "author": {
          "type": "string",
          "minLength": 1
        },
        "license": {
          "type": "string",
          "minLength": 1
        },
        "components": {
          "type": "array",
          "description": "Contains relationship",
          "items": {
            "type": "string"
          }
        },
        "subViews": {
          "type": "array",
          "description": "Contains relationship",
          "items": {
            "type": "string"
          }
        },
        "statePatterns": {
          "type": "array",
          "description": "Contains relationship",
          "items": {
            "type": "string"
          }
        },
        "actionPatterns": {
          "type": "array",
          "description": "Contains relationship",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "LibraryComponent": {
      "type": "object",
      "description": "Reusable UI component definition that can be instantiated in multiple UXSpecs",
      "required": [
        "id",
        "name",
        "type"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "type": {
          "$ref": "#/definitions/enum"
        },
        "label": {
          "type": "string",
          "minLength": 1
        },
        "description": {
          "type": "string",
          "minLength": 1
        },
        "category": {
          "type": "string",
          "minLength": 1
        }
      },
      "definitions": {
        "ComponentType": {
          "type": "string",
          "enum": [
            "form-field",
            "table",
            "chart",
            "card",
            "list",
            "text",
            "image",
            "video",
            "audio",
            "map",
            "calendar",
            "timeline",
            "tree",
            "custom"
          ]
        }
      }
    },
    "LibrarySubView": {
      "type": "object",
      "description": "Reusable grouping of components that can be composed into views",
      "required": [
        "id",
        "name"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "title": {
          "type": "string",
          "minLength": 1
        },
        "description": {
          "type": "string",
          "minLength": 1
        },
        "category": {
          "type": "string",
          "minLength": 1
        }
      },
      "definitions": {
        "LayoutStyle": {
          "type": "string",
          "enum": [
            "grid",
            "flex",
            "stack",
            "flow",
            "custom"
          ]
        }
      }
    },
    "StatePattern": {
      "type": "object",
      "description": "Reusable state machine pattern for common UX flows",
      "required": [
        "id",
        "name"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "description": {
          "type": "string",
          "minLength": 1
        },
        "category": {
          "type": "string",
          "minLength": 1
        }
      }
    },
    "ActionPattern": {
      "type": "object",
      "description": "Reusable action configuration for common user interactions",
      "required": [
        "id",
        "name"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "description": {
          "type": "string",
          "minLength": 1
        },
        "category": {
          "type": "string",
          "minLength": 1
        }
      },
      "definitions": {
        "ActionType": {
          "type": "string",
          "enum": [
            "fetchData",
            "saveData",
            "deleteData",
            "validateForm",
            "clearForm",
            "showNotification",
            "navigateTo",
            "callAPI",
            "updateState",
            "computeValue"
          ]
        }
      }
    },
    "UXApplication": {
      "type": "object",
      "description": "Application-level UX configuration that groups UXSpecs and defines shared settings",
      "required": [
        "id",
        "name",
        "channel"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "version": {
          "type": "string",
          "minLength": 1
        },
        "description": {
          "type": "string",
          "minLength": 1
        },
        "channel": {
          "$ref": "#/definitions/enum"
        },
        "experiences": {
          "type": "array",
          "description": "Contains relationship",
          "items": {
            "type": "string"
          }
        }
      },
      "definitions": {
        "ChannelType": {
          "type": "string",
          "enum": [
            "visual",
            "voice",
            "chat",
            "sms",
            "multimodal"
          ]
        }
      }
    },
    "UXSpec": {
      "type": "object",
      "description": "Complete UX specification for a single experience (visual, voice, chat, SMS)",
      "required": [
        "id",
        "name"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "version": {
          "type": "string",
          "minLength": 1
        },
        "experience": {
          "type": "string",
          "minLength": 1
        },
        "title": {
          "type": "string",
          "minLength": 1
        },
        "description": {
          "type": "string",
          "minLength": 1
        }
      }
    },
    "ExperienceState": {
      "type": "object",
      "description": "Distinct state that the experience can be in (works across all channels)",
      "required": [
        "id",
        "name"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "initial": {
          "type": "boolean"
        },
        "description": {
          "type": "string",
          "minLength": 1
        },
        "channel": {
          "type": "string",
          "minLength": 1
        },
        "onEnter": {
          "type": "array",
          "description": "Contains relationship",
          "items": {
            "type": "string"
          }
        },
        "onExit": {
          "type": "array",
          "description": "Contains relationship",
          "items": {
            "type": "string"
          }
        },
        "transitions": {
          "type": "array",
          "description": "Contains relationship",
          "items": {
            "type": "string"
          }
        },
        "enabledComponents": {
          "type": "array",
          "description": "Contains relationship",
          "items": {
            "type": "string"
          }
        },
        "disabledComponents": {
          "type": "array",
          "description": "Contains relationship",
          "items": {
            "type": "string"
          }
        },
        "hiddenComponents": {
          "type": "array",
          "description": "Contains relationship",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "StateAction": {
      "type": "object",
      "description": "Action executed during state lifecycle",
      "required": [
        "id",
        "name",
        "action"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "action": {
          "$ref": "#/definitions/enum"
        },
        "description": {
          "type": "string",
          "minLength": 1
        }
      },
      "definitions": {
        "ActionType": {
          "type": "string",
          "enum": [
            "fetchData",
            "saveData",
            "deleteData",
            "validateForm",
            "clearForm",
            "showNotification",
            "navigateTo",
            "callAPI",
            "updateState",
            "computeValue"
          ]
        },
        "DataSource": {
          "type": "string",
          "enum": [
            "api-response",
            "form-data",
            "route-params",
            "query-params",
            "local-storage",
            "constant",
            "computed"
          ]
        }
      }
    },
    "StateTransition": {
      "type": "object",
      "description": "Transition from current state to another state",
      "required": [
        "id",
        "name",
        true
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "to": {
          "type": "string",
          "minLength": 1
        },
        "true": {
          "$ref": "#/definitions/enum"
        },
        "description": {
          "type": "string",
          "minLength": 1
        },
        "actions": {
          "type": "array",
          "description": "Contains relationship",
          "items": {
            "type": "string"
          }
        }
      },
      "definitions": {
        "TriggerType": {
          "type": "string",
          "enum": [
            "success",
            "failure",
            "submit",
            "cancel",
            "click",
            "timeout",
            "dataReady",
            "custom"
          ]
        }
      }
    },
    "Condition": {
      "type": "object",
      "description": "Boolean expression for guard conditions",
      "required": [
        "id",
        "name"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "expression": {
          "type": "string",
          "minLength": 1
        }
      }
    },
    "View": {
      "type": "object",
      "description": "Routable grouping of components (a complete user experience)",
      "required": [
        "id",
        "name",
        "type"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "type": {
          "$ref": "#/definitions/enum"
        },
        "title": {
          "type": "string",
          "minLength": 1
        },
        "description": {
          "type": "string",
          "minLength": 1
        },
        "routable": {
          "type": "boolean"
        },
        "layout": {
          "type": "string",
          "minLength": 1
        },
        "subViews": {
          "type": "array",
          "description": "Contains relationship",
          "items": {
            "type": "string"
          }
        },
        "components": {
          "type": "array",
          "description": "Contains relationship",
          "items": {
            "type": "string"
          }
        },
        "actions": {
          "type": "array",
          "description": "Contains relationship",
          "items": {
            "type": "string"
          }
        }
      },
      "definitions": {
        "ViewType": {
          "type": "string",
          "enum": [
            "form",
            "list",
            "detail",
            "dashboard",
            "wizard",
            "split",
            "conversational",
            "custom"
          ]
        }
      }
    },
    "SubView": {
      "type": "object",
      "description": "Instance of a LibrarySubView or custom sub-view definition",
      "required": [
        "id",
        "name"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "title": {
          "type": "string",
          "minLength": 1
        },
        "description": {
          "type": "string",
          "minLength": 1
        },
        "order": {
          "type": "integer"
        }
      }
    },
    "ComponentInstance": {
      "type": "object",
      "description": "Instance of a LibraryComponent with application-specific configuration",
      "required": [
        "id",
        "name"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "order": {
          "type": "integer"
        }
      }
    },
    "ActionComponent": {
      "type": "object",
      "description": "Interactive element that triggers actions (button, menu, link, voice command)",
      "required": [
        "id",
        "name",
        "type"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "label": {
          "type": "string",
          "minLength": 1
        },
        "type": {
          "$ref": "#/definitions/enum"
        },
        "icon": {
          "type": "string",
          "minLength": 1
        },
        "disabled": {
          "type": "boolean"
        },
        "tooltip": {
          "type": "string",
          "minLength": 1
        },
        "channel": {
          "type": "string",
          "minLength": 1
        },
        "children": {
          "type": "array",
          "description": "Contains relationship",
          "items": {
            "type": "string"
          }
        }
      },
      "definitions": {
        "ActionComponentType": {
          "type": "string",
          "enum": [
            "button",
            "menu-item",
            "link",
            "voice-command",
            "chat-button",
            "sms-keyword",
            "custom"
          ]
        },
        "ButtonStyle": {
          "type": "string",
          "enum": [
            "primary",
            "secondary",
            "danger",
            "success",
            "warning",
            "ghost",
            "icon"
          ]
        }
      }
    },
    "ValidationRule": {
      "type": "object",
      "description": "Client-side validation rule for a field",
      "required": [
        "id",
        "name",
        "type"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "type": {
          "$ref": "#/definitions/enum"
        },
        "message": {
          "type": "string",
          "minLength": 1
        },
        "value": {
          "type": "string",
          "minLength": 1
        }
      },
      "definitions": {
        "ValidationType": {
          "type": "string",
          "enum": [
            "required",
            "minLength",
            "maxLength",
            "pattern",
            "email",
            "url",
            "min",
            "max",
            "custom"
          ]
        }
      }
    }
  }
}
