{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://example.com/schemas/06-api-layer.json",
  "title": "Api Layer Schema",
  "type": "object",
  "description": "ArchiMate Api Layer elements for business services, processes, actors, and objects",
  "properties": {
    "openAPIDocuments": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/OpenAPIDocument"
      }
    },
    "infos": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Info"
      }
    },
    "servers": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Server"
      }
    },
    "pathses": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Paths"
      }
    },
    "pathItems": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/PathItem"
      }
    },
    "operations": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Operation"
      }
    },
    "parameters": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Parameter"
      }
    },
    "requestBodies": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/RequestBody"
      }
    },
    "responseses": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Responses"
      }
    },
    "responses": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Response"
      }
    },
    "mediaTypes": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/MediaType"
      }
    },
    "componentses": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Components"
      }
    },
    "schemas": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Schema"
      }
    },
    "securitySchemes": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/SecurityScheme"
      }
    },
    "gET /productses": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/GET /products"
      }
    },
    "dELETE /customers/{id}s": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/DELETE /customers/{id}"
      }
    },
    "pOST /orderses": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/POST /orders"
      }
    },
    "relationships": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Relationship"
      }
    }
  },
  "definitions": {
    "OpenAPIDocument": {
      "type": "object",
      "description": "Root of an OpenAPI specification file",
      "required": [
        "id",
        "name",
        "openapi",
        "info",
        "servers",
        "paths",
        "security",
        "tags"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "openapi": {
          "type": "string"
        },
        "info": {
          "type": "string"
        },
        "servers": {
          "type": "string"
        },
        "paths": {
          "type": "string"
        },
        "components": {
          "type": "string"
        },
        "security": {
          "type": "string"
        },
        "tags": {
          "type": "string"
        },
        "externalDocs": {
          "type": "string"
        }
      }
    },
    "Info": {
      "type": "object",
      "description": "Metadata about the API",
      "required": [
        "id",
        "name",
        "title",
        "version",
        "termsOfService"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "title": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "version": {
          "type": "string"
        },
        "termsOfService": {
          "type": "string"
        },
        "contact": {
          "type": "string"
        },
        "license": {
          "type": "string"
        }
      }
    },
    "Server": {
      "type": "object",
      "description": "Server where the API is available",
      "required": [
        "id",
        "name",
        "url",
        "variables"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "url": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "variables": {
          "type": "string"
        }
      }
    },
    "Paths": {
      "type": "object",
      "description": "Available API endpoints and operations",
      "required": [
        "id",
        "name"
      ],
      "properties": {}
    },
    "PathItem": {
      "type": "object",
      "description": "Operations available on a path",
      "required": [
        "id",
        "name",
        "servers",
        "parameters"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "summary": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "servers": {
          "type": "string"
        },
        "parameters": {
          "type": "string"
        }
      }
    },
    "Operation": {
      "type": "object",
      "description": "Single API operation (HTTP method on a path)",
      "required": [
        "id",
        "name",
        "operationId",
        "summary",
        "description",
        "tags"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "operationId": {
          "type": "string"
        },
        "summary": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "tags": {
          "type": "string"
        },
        "deprecated": {
          "type": "boolean"
        },
        "parameters": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to Parameter IDs"
        },
        "requestBody": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to RequestBody IDs"
        },
        "responses": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to Responses IDs"
        },
        "callbacks": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to Callback IDs"
        },
        "security": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to SecurityRequirement IDs"
        }
      }
    },
    "Parameter": {
      "type": "object",
      "description": "Parameter for an operation",
      "required": [
        "id",
        "name",
        "in",
        "required"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "in": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "required": {
          "type": "boolean"
        },
        "deprecated": {
          "type": "boolean"
        },
        "allowEmptyValue": {
          "type": "boolean"
        }
      }
    },
    "RequestBody": {
      "type": "object",
      "description": "Request payload for an operation",
      "required": [
        "id",
        "name"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "description": {
          "type": "string"
        },
        "required": {
          "type": "boolean"
        }
      }
    },
    "Responses": {
      "type": "object",
      "description": "Possible responses from an operation",
      "required": [
        "id",
        "name"
      ],
      "properties": {}
    },
    "Response": {
      "type": "object",
      "description": "Single response definition",
      "required": [
        "id",
        "name",
        "description"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "description": {
          "type": "string"
        }
      }
    },
    "MediaType": {
      "type": "object",
      "description": "Media type and schema for request/response body",
      "required": [
        "id",
        "name",
        "contentType"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "contentType": {
          "type": "string"
        },
        "example": {
          "type": "string"
        },
        "schema": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "maxItems": 1,
          "description": "References to Schema IDs"
        },
        "examples": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to Example IDs"
        },
        "encoding": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to Encoding IDs"
        }
      }
    },
    "Components": {
      "type": "object",
      "description": "Reusable component definitions",
      "required": [
        "id",
        "name"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "schemas": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to Schema IDs"
        },
        "responses": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to Response IDs"
        },
        "parameters": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to Parameter IDs"
        },
        "examples": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to Example IDs"
        },
        "requestBodies": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to RequestBody IDs"
        },
        "headers": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to Header IDs"
        },
        "securitySchemes": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to SecurityScheme IDs"
        },
        "links": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to Link IDs"
        },
        "callbacks": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to Callback IDs"
        }
      }
    },
    "Schema": {
      "type": "object",
      "description": "Data type definition (JSON Schema subset)",
      "required": [
        "id",
        "name",
        "type",
        "format"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "type": {
          "type": "string"
        },
        "title": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "format": {
          "type": "string"
        },
        "default": {
          "type": "string"
        },
        "enum": {
          "type": "string"
        },
        "nullable": {
          "type": "boolean"
        }
      }
    },
    "SecurityScheme": {
      "type": "object",
      "description": "Security mechanism for the API",
      "required": [
        "id",
        "name",
        "type",
        "in",
        "scheme",
        "bearerFormat"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "type": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "in": {
          "type": "string"
        },
        "scheme": {
          "type": "string"
        },
        "bearerFormat": {
          "type": "string"
        }
      }
    },
    "GET /products": {
      "type": "object",
      "required": [
        "id",
        "name"
      ],
      "properties": {}
    },
    "DELETE /customers/{id}": {
      "type": "object",
      "required": [
        "id",
        "name"
      ],
      "properties": {}
    },
    "POST /orders": {
      "type": "object",
      "required": [
        "id",
        "name"
      ],
      "properties": {}
    },
    "Relationship": {
      "type": "object",
      "required": [
        "type",
        "source",
        "target"
      ],
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "Composition",
            "Aggregation",
            "Assignment",
            "Realization",
            "Triggering",
            "Flow",
            "Association",
            "Access",
            "Serving"
          ]
        },
        "source": {
          "type": "string",
          "format": "uuid"
        },
        "target": {
          "type": "string",
          "format": "uuid"
        },
        "documentation": {
          "type": "string"
        }
      }
    }
  }
}
