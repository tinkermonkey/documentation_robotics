{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://example.com/schemas/09-ux-layer.json",
  "title": "Ux Layer Schema",
  "type": "object",
  "description": "ArchiMate Ux Layer elements for business services, processes, actors, and objects",
  "properties": {
    "uXSpecs": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/UXSpec"
      }
    },
    "experienceStates": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ExperienceState"
      }
    },
    "stateActions": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/StateAction"
      }
    },
    "stateTransitions": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/StateTransition"
      }
    },
    "conditions": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Condition"
      }
    },
    "views": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/View"
      }
    },
    "subViews": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/SubView"
      }
    },
    "components": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Component"
      }
    },
    "validationRules": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ValidationRule"
      }
    },
    "actionComponents": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/ActionComponent"
      }
    },
    "relationships": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Relationship"
      }
    }
  },
  "definitions": {
    "UXSpec": {
      "type": "object",
      "description": "Complete UX specification for an experience (visual, voice, chat, SMS)",
      "required": [
        "id",
        "name",
        "channel"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "version": {
          "type": "string"
        },
        "experience": {
          "type": "string"
        },
        "channel": {
          "type": "string",
          "enum": [
            "visual",
            "voice",
            "chat",
            "sms",
            "multimodal"
          ]
        },
        "title": {
          "type": "string"
        },
        "states": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 1,
          "description": "References to ExperienceState IDs"
        },
        "views": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 1,
          "description": "References to View IDs"
        },
        "globalActions": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to ActionComponent IDs"
        }
      }
    },
    "ExperienceState": {
      "type": "object",
      "description": "Distinct state that the experience can be in (works across all channels)",
      "required": [
        "id",
        "name"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "initial": {
          "type": "boolean"
        },
        "description": {
          "type": "string"
        },
        "channel": {
          "type": "string"
        },
        "onEnter": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to StateAction IDs"
        },
        "onExit": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to StateAction IDs"
        },
        "transitions": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to StateTransition IDs"
        },
        "enabledComponents": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to string IDs"
        },
        "disabledComponents": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to string IDs"
        },
        "hiddenComponents": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to string IDs"
        }
      }
    },
    "StateAction": {
      "type": "object",
      "description": "Action executed during state lifecycle",
      "required": [
        "id",
        "name",
        "action"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "action": {
          "type": "string",
          "enum": [
            "fetchData",
            "saveData",
            "deleteData",
            "validateForm",
            "clearForm",
            "showNotification",
            "navigateTo",
            "callAPI",
            "updateState",
            "computeValue"
          ]
        },
        "description": {
          "type": "string"
        }
      }
    },
    "StateTransition": {
      "type": "object",
      "description": "Transition from current state to another state",
      "required": [
        "id",
        "name",
        true
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "to": {
          "type": "string"
        },
        "true": {
          "type": "string",
          "enum": [
            "success",
            "failure",
            "submit",
            "cancel",
            "click",
            "timeout",
            "dataReady",
            "custom"
          ]
        },
        "description": {
          "type": "string"
        },
        "actions": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to StateAction IDs"
        }
      }
    },
    "Condition": {
      "type": "object",
      "description": "Boolean expression for guard conditions",
      "required": [
        "id",
        "name"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "expression": {
          "type": "string"
        }
      }
    },
    "View": {
      "type": "object",
      "description": "Routable grouping of components (a complete user experience)",
      "required": [
        "id",
        "name",
        "type"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "type": {
          "type": "string",
          "enum": [
            "form",
            "list",
            "detail",
            "dashboard",
            "wizard",
            "split",
            "conversational",
            "custom"
          ]
        },
        "title": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "routable": {
          "type": "boolean"
        },
        "layout": {
          "type": "string"
        },
        "subViews": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to SubView IDs"
        },
        "components": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to Component IDs"
        },
        "actions": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to ActionComponent IDs"
        }
      }
    },
    "SubView": {
      "type": "object",
      "description": "Reusable grouping of components (not directly routable)",
      "required": [
        "id",
        "name"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "title": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "collapsible": {
          "type": "boolean"
        },
        "collapsed": {
          "type": "boolean"
        },
        "layout": {
          "type": "string"
        },
        "order": {
          "type": "integer"
        },
        "components": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to Component IDs"
        },
        "subViews": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to SubView IDs"
        }
      }
    },
    "Component": {
      "type": "object",
      "description": "Atomic UI element (table, form field, graph, custom visualization)",
      "required": [
        "id",
        "name",
        "type"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "type": {
          "type": "string",
          "enum": [
            "form-field",
            "table",
            "chart",
            "card",
            "list",
            "text",
            "image",
            "video",
            "audio",
            "map",
            "calendar",
            "timeline",
            "tree",
            "custom"
          ]
        },
        "label": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "required": {
          "type": "boolean"
        },
        "readonly": {
          "type": "boolean"
        },
        "hidden": {
          "type": "boolean"
        },
        "order": {
          "type": "integer"
        }
      }
    },
    "ValidationRule": {
      "type": "object",
      "description": "Client-side validation rule for a field",
      "required": [
        "id",
        "name",
        "type"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "type": {
          "type": "string",
          "enum": [
            "required",
            "minLength",
            "maxLength",
            "pattern",
            "email",
            "url",
            "min",
            "max",
            "custom"
          ]
        },
        "message": {
          "type": "string"
        },
        "value": {
          "type": "string"
        }
      }
    },
    "ActionComponent": {
      "type": "object",
      "description": "Interactive element that triggers actions (button, menu, link, voice command)",
      "required": [
        "id",
        "name",
        "type"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "label": {
          "type": "string"
        },
        "type": {
          "type": "string",
          "enum": [
            "button",
            "menu-item",
            "link",
            "voice-command",
            "chat-button",
            "sms-keyword",
            "custom"
          ]
        },
        "icon": {
          "type": "string"
        },
        "disabled": {
          "type": "boolean"
        },
        "tooltip": {
          "type": "string"
        },
        "channel": {
          "type": "string"
        },
        "children": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 0,
          "description": "References to ActionComponent IDs"
        }
      }
    },
    "Relationship": {
      "type": "object",
      "required": [
        "type",
        "source",
        "target"
      ],
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "Composition",
            "Aggregation",
            "Assignment",
            "Realization",
            "Triggering",
            "Flow",
            "Association",
            "Access",
            "Serving"
          ]
        },
        "source": {
          "type": "string",
          "format": "uuid"
        },
        "target": {
          "type": "string",
          "format": "uuid"
        },
        "documentation": {
          "type": "string"
        }
      }
    }
  }
}
