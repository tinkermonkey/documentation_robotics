{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://example.com/schemas/05-technology-layer.json",
  "title": "Technology Layer Schema",
  "type": "object",
  "description": "ArchiMate Technology Layer elements for business services, processes, actors, and objects",
  "properties": {
    "nodes": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Node"
      }
    },
    "devices": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Device"
      }
    },
    "systemSoftwares": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/SystemSoftware"
      }
    },
    "technologyCollaborations": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/TechnologyCollaboration"
      }
    },
    "technologyInterfaces": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/TechnologyInterface"
      }
    },
    "paths": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Path"
      }
    },
    "communicationNetworks": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/CommunicationNetwork"
      }
    },
    "technologyFunctions": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/TechnologyFunction"
      }
    },
    "technologyProcesses": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/TechnologyProcess"
      }
    },
    "technologyInteractions": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/TechnologyInteraction"
      }
    },
    "technologyEvents": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/TechnologyEvent"
      }
    },
    "technologyServices": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/TechnologyService"
      }
    },
    "artifacts": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Artifact"
      }
    },
    "relationships": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Relationship"
      }
    }
  },
  "definitions": {
    "Node": {
      "type": "object",
      "description": "Computational or physical resource that hosts artifacts",
      "required": [
        "id",
        "name",
        "nodeType"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        },
        "nodeType": {
          "type": "string",
          "enum": [
            "server",
            "container",
            "vm",
            "kubernetes-cluster",
            "serverless-function",
            "database-cluster"
          ]
        },
        "properties": {
          "type": "object",
          "properties": {
            "node.provider": {
              "type": "string"
            },
            "node.instance-type": {
              "type": "string"
            },
            "node.region": {
              "type": "string"
            },
            "spec.terraform": {
              "type": "string"
            },
            "motivation.governed-by-principles": {
              "type": "string",
              "description": "technology selection principles"
            },
            "motivation.constrained-by": {
              "type": "string",
              "description": "budget, vendor, regulatory constraints"
            },
            "motivation.fulfills-requirements": {
              "type": "string",
              "description": "technical/non-functional requirements"
            }
          }
        }
      }
    },
    "Device": {
      "type": "object",
      "description": "Physical IT resource with processing capability",
      "required": [
        "id",
        "name",
        "deviceType"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        },
        "deviceType": {
          "type": "string",
          "enum": [
            "server",
            "workstation",
            "mobile",
            "iot-device",
            "network-device"
          ]
        },
        "properties": {
          "type": "object",
          "properties": {
            "device.manufacturer": {
              "type": "string"
            },
            "device.model": {
              "type": "string"
            }
          }
        }
      }
    },
    "SystemSoftware": {
      "type": "object",
      "description": "Software that provides platform for applications",
      "required": [
        "id",
        "name",
        "softwareType"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        },
        "softwareType": {
          "type": "string",
          "enum": [
            "operating-system",
            "database",
            "middleware",
            "container-runtime",
            "web-server",
            "message-broker"
          ]
        },
        "properties": {
          "type": "object",
          "properties": {
            "software.version": {
              "type": "string"
            },
            "software.license": {
              "type": "string"
            },
            "motivation.governed-by-principles": {
              "type": "string",
              "description": "software selection principles"
            },
            "motivation.constrained-by": {
              "type": "string",
              "description": "license, compliance constraints"
            },
            "motivation.fulfills-requirements": {
              "type": "string",
              "description": "security, compliance requirements"
            }
          }
        }
      }
    },
    "TechnologyCollaboration": {
      "type": "object",
      "description": "Aggregate of nodes working together",
      "required": [
        "id",
        "name"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        },
        "nodes": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 2,
          "description": "References to Node IDs"
        }
      }
    },
    "TechnologyInterface": {
      "type": "object",
      "description": "Point of access where technology services are available",
      "required": [
        "id",
        "name",
        "protocol"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        },
        "protocol": {
          "type": "string",
          "enum": [
            "HTTP",
            "HTTPS",
            "TCP",
            "UDP",
            "WebSocket",
            "AMQP",
            "MQTT",
            "SQL"
          ]
        },
        "properties": {
          "type": "object",
          "properties": {
            "interface.port": {
              "type": "string"
            },
            "interface.url": {
              "type": "string"
            }
          }
        }
      }
    },
    "Path": {
      "type": "object",
      "description": "Link between nodes through which they exchange",
      "required": [
        "id",
        "name",
        "pathType"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        },
        "pathType": {
          "type": "string",
          "enum": [
            "network",
            "vpn",
            "direct-connect",
            "internet"
          ]
        },
        "properties": {
          "type": "object",
          "properties": {
            "path.bandwidth": {
              "type": "string"
            },
            "path.latency": {
              "type": "string"
            }
          }
        }
      }
    },
    "CommunicationNetwork": {
      "type": "object",
      "description": "Set of structures that connects nodes",
      "required": [
        "id",
        "name",
        "networkType"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        },
        "networkType": {
          "type": "string",
          "enum": [
            "lan",
            "wan",
            "vpn",
            "internet",
            "cdn"
          ]
        },
        "properties": {
          "type": "object",
          "properties": {
            "network.cidr": {
              "type": "string"
            },
            "network.vlan": {
              "type": "string"
            },
            "motivation.governed-by-principles": {
              "type": "string",
              "description": "network architecture principles"
            },
            "motivation.constrained-by": {
              "type": "string",
              "description": "regulatory, data residency constraints"
            },
            "motivation.fulfills-requirements": {
              "type": "string",
              "description": "security, compliance requirements"
            }
          }
        }
      }
    },
    "TechnologyFunction": {
      "type": "object",
      "description": "Collection of technology behavior",
      "required": [
        "id",
        "name"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        }
      }
    },
    "TechnologyProcess": {
      "type": "object",
      "description": "Sequence of technology behaviors",
      "required": [
        "id",
        "name"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        },
        "properties": {
          "type": "object",
          "properties": {
            "process.automation": {
              "type": "string"
            }
          }
        }
      }
    },
    "TechnologyInteraction": {
      "type": "object",
      "description": "Unit of collective technology behavior",
      "required": [
        "id",
        "name"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        }
      }
    },
    "TechnologyEvent": {
      "type": "object",
      "description": "Technology state change",
      "required": [
        "id",
        "name",
        "eventType"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        },
        "eventType": {
          "type": "string",
          "enum": [
            "startup",
            "shutdown",
            "failure",
            "scaling",
            "maintenance"
          ]
        }
      }
    },
    "TechnologyService": {
      "type": "object",
      "description": "Externally visible unit of technology functionality",
      "required": [
        "id",
        "name",
        "serviceType"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        },
        "serviceType": {
          "type": "string",
          "enum": [
            "infrastructure",
            "platform",
            "storage",
            "compute",
            "network"
          ]
        },
        "properties": {
          "type": "object",
          "properties": {
            "service.sla": {
              "type": "string"
            },
            "service.monitoring": {
              "type": "string"
            },
            "motivation.supports-goals": {
              "type": "string",
              "description": "comma-separated Goal IDs this service supports"
            },
            "motivation.governed-by-principles": {
              "type": "string",
              "description": "comma-separated Principle IDs"
            },
            "motivation.constrained-by": {
              "type": "string",
              "description": "comma-separated Constraint IDs"
            },
            "apm.sla-target-availability": {
              "type": "string",
              "description": "target uptime percentage"
            },
            "apm.sla-target-latency": {
              "type": "string",
              "description": "target response time"
            },
            "apm.health-monitored": {
              "type": "string",
              "description": "whether health is actively monitored"
            },
            "apm.health-check-endpoint": {
              "type": "string",
              "description": "health check endpoint"
            }
          }
        }
      }
    },
    "Artifact": {
      "type": "object",
      "description": "Physical piece of data used or produced",
      "required": [
        "id",
        "name",
        "artifactType"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        },
        "artifactType": {
          "type": "string",
          "enum": [
            "database",
            "file",
            "configuration",
            "binary",
            "log",
            "backup"
          ]
        },
        "properties": {
          "type": "object",
          "properties": {
            "artifact.format": {
              "type": "string"
            },
            "artifact.size": {
              "type": "string"
            },
            "spec.database": {
              "type": "string"
            },
            "security.encryption-required": {
              "type": "string"
            },
            "security.encryption-type": {
              "type": "string"
            },
            "security.classification": {
              "type": "string"
            },
            "security.pii": {
              "type": "string",
              "description": "contains personally identifiable information"
            },
            "motivation.constrained-by": {
              "type": "string",
              "description": "retention, compliance constraints"
            }
          }
        }
      }
    },
    "Relationship": {
      "type": "object",
      "required": [
        "type",
        "source",
        "target"
      ],
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "Composition",
            "Aggregation",
            "Assignment",
            "Realization",
            "Triggering",
            "Flow",
            "Association",
            "Access",
            "Serving"
          ]
        },
        "source": {
          "type": "string",
          "format": "uuid"
        },
        "target": {
          "type": "string",
          "format": "uuid"
        },
        "documentation": {
          "type": "string"
        }
      }
    }
  }
}
