{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Field",
  "description": "A named data element within a collection. Paradigm-neutral: maps to SQL column, document store field/path, key-value hash field, wide-column column, vector dimension or metadata field, time-series tag or field, graph property, and search engine mapping property.",
  "allOf": [
    {
      "$ref": "../../base/spec-node.schema.json"
    }
  ],
  "properties": {
    "spec_node_id": {
      "const": "data-store.field"
    },
    "layer_id": {
      "const": "data-store"
    },
    "type": {
      "const": "field"
    },
    "attributes": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string"
        },
        "dataType": {
          "type": "string",
          "description": "Data type of this field. Interpretation is paradigm-specific: SQL types (VARCHAR, INTEGER, TIMESTAMP), BSON types (String, ObjectId, Document), Elasticsearch mapping types (keyword, text, dense_vector), or any engine-native type name."
        },
        "nullable": {
          "type": "boolean"
        },
        "defaultValue": {
          "type": "string"
        },
        "generated": {
          "type": "string",
          "enum": ["ALWAYS", "BY_DEFAULT", "NEVER"],
          "description": "Whether the field value is auto-generated. ALWAYS: value is always system-generated (SQL identity GENERATED ALWAYS, MongoDB auto _id, auto-increment). BY_DEFAULT: system-generated unless explicitly overridden (SQL GENERATED BY DEFAULT). NEVER: value must be user-provided."
        },
        "fieldRole": {
          "type": "string",
          "enum": [
            "VALUE",
            "TAG",
            "TIMESTAMP",
            "PARTITION_KEY",
            "CLUSTERING_KEY",
            "VECTOR",
            "METADATA",
            "LABEL",
            "PROPERTY"
          ],
          "description": "Semantic role of this field within its collection. VALUE: regular data field. TAG: indexed metadata for filtering (time-series). TIMESTAMP: time-series time field. PARTITION_KEY: wide-column or distributed partition key component. CLUSTERING_KEY: wide-column clustering/sort key component. VECTOR: vector embedding field. METADATA: vector store metadata for filtering. LABEL: graph node label. PROPERTY: graph node or edge property."
        },
        "vectorDimensions": {
          "type": "integer",
          "description": "Number of dimensions for vector fields. Only applicable when fieldRole is VECTOR."
        },
        "distanceMetric": {
          "type": "string",
          "enum": ["COSINE", "EUCLIDEAN", "DOT_PRODUCT", "MANHATTAN"],
          "description": "Distance metric for vector similarity search. COSINE: angular similarity. EUCLIDEAN: L2 distance. DOT_PRODUCT: inner product similarity. MANHATTAN: L1 distance. Only applicable when fieldRole is VECTOR."
        },
        "analyzer": {
          "type": "string",
          "description": "Text analyzer for search engine fields (e.g., 'standard', 'english', 'keyword', 'whitespace'). Controls tokenization and normalization. Only applicable for search engine paradigm."
        },
        "nested": {
          "type": "boolean",
          "description": "Whether this field contains nested or embedded documents. Relevant for document stores (MongoDB embedded documents) and search engines (Elasticsearch nested type)."
        },
        "x-source-reference": {
          "type": "string",
          "description": "Source code reference using OpenAPI x- extension pattern."
        }
      },
      "required": ["dataType"],
      "additionalProperties": false
    }
  }
}
