{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "InstrumentationConfig",
  "description": "Configuration for OTel instrumentation of application code. Auto-instrumentation uses SDK contrib plugin libraries (e.g., opentelemetry-instrumentation-express) that hook into frameworks transparently at SDK bootstrap time. Manual instrumentation uses direct OTel API calls (Tracer.startSpan, Meter.createCounter) embedded in application code. This node controls which libraries or code paths are instrumented and whether instrumentation is enabled.",
  "allOf": [
    {
      "$ref": "../../base/spec-node.schema.json"
    }
  ],
  "properties": {
    "spec_node_id": {
      "const": "apm.instrumentationconfig"
    },
    "layer_id": {
      "const": "apm"
    },
    "type": {
      "const": "instrumentationconfig"
    },
    "attributes": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string"
        },
        "libraryName": {
          "type": "string",
          "description": "OTel InstrumentationScope-compatible library name identifying the instrumented library or framework (e.g., 'io.opentelemetry.spring-webmvc-6.0'). Used to correlate this config with telemetry emitted under the matching InstrumentationScope."
        },
        "enabled": {
          "type": "boolean"
        },
        "description": {
          "type": "string"
        },
        "instrumentationType": {
          "type": "string",
          "enum": ["automatic", "manual", "both"],
          "description": "Whether instrumentation is applied automatically, manually, or both"
        }
      },
      "required": ["type"],
      "additionalProperties": false
    }
  }
}
