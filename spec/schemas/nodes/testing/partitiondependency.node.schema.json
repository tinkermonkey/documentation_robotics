{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "PartitionDependency",
  "description": "A constraint specifying how selection of a partition value in one field affects valid or available partition values in another field, enabling combinatorial test design to avoid invalid input combinations per IEEE 829-2008 test design specification.",
  "allOf": [
    {
      "$ref": "../../base/spec-node.schema.json"
    }
  ],
  "properties": {
    "spec_node_id": {
      "const": "testing.partitiondependency"
    },
    "layer_id": {
      "const": "testing"
    },
    "type": {
      "const": "partitiondependency"
    },
    "attributes": {
      "type": "object",
      "properties": {
        "dependsOnPartition": {
          "type": "string",
          "description": "ID of the testing.inputspacepartition that triggers this dependency"
        },
        "dependsOnValue": {
          "type": "string",
          "description": "Label or ID of the testing.partitionvalue that activates this dependency"
        },
        "effect": {
          "type": "string",
          "enum": ["excludes", "requires", "restricts-to", "modifies-range"],
          "description": "How the dependency affects the related partition values"
        },
        "affectedValues": {
          "type": "string",
          "description": "Comma-separated labels or IDs of the partition values in the dependent field whose availability is modified by this dependency (e.g., values that are excluded, required, or restricted when the trigger value is selected)."
        },
        "description": {
          "type": "string"
        }
      },
      "required": ["dependsOnPartition", "dependsOnValue", "effect", "affectedValues"],
      "additionalProperties": false
    }
  }
}
