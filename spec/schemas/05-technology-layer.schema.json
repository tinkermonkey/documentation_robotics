{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://example.com/schemas/05-technology-layer.schema.json",
  "title": "Technology Layer Schema",
  "description": "Describes the technology infrastructure including hardware, software, networks, and facilities that support applications.",
  "type": "object",
  "properties": {
    "nodes": {
      "type": "array",
      "description": "Collection of Node entities",
      "items": {
        "$ref": "#/definitions/Node"
      }
    },
    "devices": {
      "type": "array",
      "description": "Collection of Device entities",
      "items": {
        "$ref": "#/definitions/Device"
      }
    },
    "system-softwares": {
      "type": "array",
      "description": "Collection of SystemSoftware entities",
      "items": {
        "$ref": "#/definitions/SystemSoftware"
      }
    },
    "technology-collaborations": {
      "type": "array",
      "description": "Collection of TechnologyCollaboration entities",
      "items": {
        "$ref": "#/definitions/TechnologyCollaboration"
      }
    },
    "technology-interfaces": {
      "type": "array",
      "description": "Collection of TechnologyInterface entities",
      "items": {
        "$ref": "#/definitions/TechnologyInterface"
      }
    },
    "paths": {
      "type": "array",
      "description": "Collection of Path entities",
      "items": {
        "$ref": "#/definitions/Path"
      }
    },
    "communication-networks": {
      "type": "array",
      "description": "Collection of CommunicationNetwork entities",
      "items": {
        "$ref": "#/definitions/CommunicationNetwork"
      }
    },
    "technology-functions": {
      "type": "array",
      "description": "Collection of TechnologyFunction entities",
      "items": {
        "$ref": "#/definitions/TechnologyFunction"
      }
    },
    "technology-processes": {
      "type": "array",
      "description": "Collection of TechnologyProcess entities",
      "items": {
        "$ref": "#/definitions/TechnologyProcess"
      }
    },
    "technology-interactions": {
      "type": "array",
      "description": "Collection of TechnologyInteraction entities",
      "items": {
        "$ref": "#/definitions/TechnologyInteraction"
      }
    },
    "technology-events": {
      "type": "array",
      "description": "Collection of TechnologyEvent entities",
      "items": {
        "$ref": "#/definitions/TechnologyEvent"
      }
    },
    "technology-services": {
      "type": "array",
      "description": "Collection of TechnologyService entities",
      "items": {
        "$ref": "#/definitions/TechnologyService"
      }
    },
    "artifacts": {
      "type": "array",
      "description": "Collection of Artifact entities",
      "items": {
        "$ref": "#/definitions/Artifact"
      }
    }
  },
  "definitions": {
    "Node": {
      "type": "object",
      "description": "Computational or physical resource that hosts artifacts",
      "required": [
        "id",
        "name",
        "nodeType"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string",
          "minLength": 1
        },
        "nodeType": {
          "$ref": "#/definitions/enum"
        },
        "properties": {
          "type": "object",
          "description": "Cross-layer properties",
          "properties": {
            "node": {
              "type": "object",
              "properties": {
                "provider": {
                  "type": "string",
                  "description": "optional"
                },
                "instance-type": {
                  "type": "string",
                  "description": "optional"
                },
                "region": {
                  "type": "string",
                  "description": "optional"
                }
              }
            },
            "spec": {
              "type": "object",
              "properties": {
                "terraform": {
                  "type": "string",
                  "description": "optional"
                }
              }
            },
            "motivation": {
              "type": "object",
              "properties": {
                "governed-by-principles": {
                  "allOf": [
                    {
                      "$ref": "common/relationships.schema.json#/definitions/MotivationProperties/properties/governed-by"
                    }
                  ]
                },
                "constrained-by": {
                  "allOf": [
                    {
                      "$ref": "common/relationships.schema.json#/definitions/MotivationProperties/properties/constrained-by"
                    }
                  ]
                },
                "fulfills-requirements": {
                  "allOf": [
                    {
                      "$ref": "common/relationships.schema.json#/definitions/MotivationProperties/properties/fulfills-requirements"
                    }
                  ]
                }
              }
            }
          }
        }
      },
      "definitions": {
        "NodeType": {
          "type": "string",
          "enum": [
            "server",
            "container",
            "vm",
            "kubernetes-cluster",
            "serverless-function",
            "database-cluster"
          ]
        }
      }
    },
    "Device": {
      "type": "object",
      "description": "Physical IT resource with processing capability",
      "required": [
        "id",
        "name",
        "deviceType"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string",
          "minLength": 1
        },
        "deviceType": {
          "$ref": "#/definitions/enum"
        },
        "properties": {
          "type": "object",
          "description": "Cross-layer properties",
          "properties": {
            "device": {
              "type": "object",
              "properties": {
                "manufacturer": {
                  "type": "string",
                  "description": ""
                },
                "model": {
                  "type": "string",
                  "description": ""
                }
              }
            }
          }
        }
      },
      "definitions": {
        "DeviceType": {
          "type": "string",
          "enum": [
            "server",
            "workstation",
            "mobile",
            "iot-device",
            "network-device"
          ]
        }
      }
    },
    "SystemSoftware": {
      "type": "object",
      "description": "Software that provides platform for applications",
      "required": [
        "id",
        "name",
        "softwareType"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string",
          "minLength": 1
        },
        "softwareType": {
          "$ref": "#/definitions/enum"
        },
        "properties": {
          "type": "object",
          "description": "Cross-layer properties",
          "properties": {
            "software": {
              "type": "object",
              "properties": {
                "version": {
                  "type": "string",
                  "description": ""
                },
                "license": {
                  "type": "string",
                  "description": "optional"
                }
              }
            },
            "motivation": {
              "type": "object",
              "properties": {
                "governed-by-principles": {
                  "allOf": [
                    {
                      "$ref": "common/relationships.schema.json#/definitions/MotivationProperties/properties/governed-by"
                    }
                  ]
                },
                "constrained-by": {
                  "allOf": [
                    {
                      "$ref": "common/relationships.schema.json#/definitions/MotivationProperties/properties/constrained-by"
                    }
                  ]
                },
                "fulfills-requirements": {
                  "allOf": [
                    {
                      "$ref": "common/relationships.schema.json#/definitions/MotivationProperties/properties/fulfills-requirements"
                    }
                  ]
                }
              }
            }
          }
        }
      },
      "definitions": {
        "SystemSoftwareType": {
          "type": "string",
          "enum": [
            "operating-system",
            "database",
            "middleware",
            "container-runtime",
            "web-server",
            "message-broker"
          ]
        }
      }
    },
    "TechnologyCollaboration": {
      "type": "object",
      "description": "Aggregate of nodes working together",
      "required": [
        "id",
        "name"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string",
          "minLength": 1
        },
        "nodes": {
          "type": "array",
          "description": "Contains relationship",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "TechnologyInterface": {
      "type": "object",
      "description": "Point of access where technology services are available",
      "required": [
        "id",
        "name",
        "protocol"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string",
          "minLength": 1
        },
        "protocol": {
          "$ref": "#/definitions/enum"
        },
        "properties": {
          "type": "object",
          "description": "Cross-layer properties",
          "properties": {
            "interface": {
              "type": "object",
              "properties": {
                "port": {
                  "type": "string",
                  "description": ""
                },
                "url": {
                  "type": "string",
                  "description": ""
                }
              }
            }
          }
        }
      },
      "definitions": {
        "TechProtocol": {
          "type": "string",
          "enum": [
            "HTTP",
            "HTTPS",
            "TCP",
            "UDP",
            "WebSocket",
            "AMQP",
            "MQTT",
            "SQL"
          ]
        }
      }
    },
    "Path": {
      "type": "object",
      "description": "Link between nodes through which they exchange",
      "required": [
        "id",
        "name",
        "pathType"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string",
          "minLength": 1
        },
        "pathType": {
          "$ref": "#/definitions/enum"
        },
        "properties": {
          "type": "object",
          "description": "Cross-layer properties",
          "properties": {
            "path": {
              "type": "object",
              "properties": {
                "bandwidth": {
                  "type": "string",
                  "description": "optional"
                },
                "latency": {
                  "type": "string",
                  "description": "optional"
                }
              }
            }
          }
        }
      },
      "definitions": {
        "PathType": {
          "type": "string",
          "enum": [
            "network",
            "vpn",
            "direct-connect",
            "internet"
          ]
        }
      }
    },
    "CommunicationNetwork": {
      "type": "object",
      "description": "Set of structures that connects nodes",
      "required": [
        "id",
        "name",
        "networkType"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string",
          "minLength": 1
        },
        "networkType": {
          "$ref": "#/definitions/enum"
        },
        "properties": {
          "type": "object",
          "description": "Cross-layer properties",
          "properties": {
            "network": {
              "type": "object",
              "properties": {
                "cidr": {
                  "type": "string",
                  "description": "optional"
                },
                "vlan": {
                  "type": "string",
                  "description": ""
                }
              }
            },
            "motivation": {
              "type": "object",
              "properties": {
                "governed-by-principles": {
                  "allOf": [
                    {
                      "$ref": "common/relationships.schema.json#/definitions/MotivationProperties/properties/governed-by"
                    }
                  ]
                },
                "constrained-by": {
                  "allOf": [
                    {
                      "$ref": "common/relationships.schema.json#/definitions/MotivationProperties/properties/constrained-by"
                    }
                  ]
                },
                "fulfills-requirements": {
                  "allOf": [
                    {
                      "$ref": "common/relationships.schema.json#/definitions/MotivationProperties/properties/fulfills-requirements"
                    }
                  ]
                }
              }
            }
          }
        }
      },
      "definitions": {
        "NetworkType": {
          "type": "string",
          "enum": [
            "lan",
            "wan",
            "vpn",
            "internet",
            "cdn"
          ]
        }
      }
    },
    "TechnologyFunction": {
      "type": "object",
      "description": "Collection of technology behavior",
      "required": [
        "id",
        "name"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string",
          "minLength": 1
        }
      }
    },
    "TechnologyProcess": {
      "type": "object",
      "description": "Sequence of technology behaviors",
      "required": [
        "id",
        "name"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string",
          "minLength": 1
        },
        "properties": {
          "type": "object",
          "description": "Cross-layer properties",
          "properties": {
            "process": {
              "type": "object",
              "properties": {
                "automation": {
                  "type": "string",
                  "description": "optional"
                }
              }
            }
          }
        }
      }
    },
    "TechnologyInteraction": {
      "type": "object",
      "description": "Unit of collective technology behavior",
      "required": [
        "id",
        "name"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string",
          "minLength": 1
        }
      }
    },
    "TechnologyEvent": {
      "type": "object",
      "description": "Technology state change",
      "required": [
        "id",
        "name",
        "eventType"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string",
          "minLength": 1
        },
        "eventType": {
          "$ref": "#/definitions/enum"
        }
      },
      "definitions": {
        "TechEventType": {
          "type": "string",
          "enum": [
            "startup",
            "shutdown",
            "failure",
            "scaling",
            "maintenance"
          ]
        }
      }
    },
    "TechnologyService": {
      "type": "object",
      "description": "Externally visible unit of technology functionality",
      "required": [
        "id",
        "name",
        "serviceType"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string",
          "minLength": 1
        },
        "serviceType": {
          "$ref": "#/definitions/enum"
        },
        "properties": {
          "type": "object",
          "description": "Cross-layer properties",
          "properties": {
            "service": {
              "type": "object",
              "properties": {
                "sla": {
                  "type": "string",
                  "description": "optional"
                },
                "monitoring": {
                  "type": "string",
                  "description": "optional"
                }
              }
            },
            "motivation": {
              "type": "object",
              "properties": {
                "supports-goals": {
                  "allOf": [
                    {
                      "$ref": "common/relationships.schema.json#/definitions/MotivationProperties/properties/supports-goals"
                    }
                  ]
                },
                "governed-by-principles": {
                  "allOf": [
                    {
                      "$ref": "common/relationships.schema.json#/definitions/MotivationProperties/properties/governed-by"
                    }
                  ]
                },
                "constrained-by": {
                  "allOf": [
                    {
                      "$ref": "common/relationships.schema.json#/definitions/MotivationProperties/properties/constrained-by"
                    }
                  ]
                }
              }
            },
            "apm": {
              "type": "object",
              "properties": {
                "sla-target-availability": {
                  "type": "string",
                  "description": "optional, target uptime percentage"
                },
                "sla-target-latency": {
                  "type": "string",
                  "description": "optional, target response time"
                },
                "health-monitored": {
                  "type": "string",
                  "description": "optional, whether health is actively monitored"
                },
                "health-check-endpoint": {
                  "type": "string",
                  "description": "optional, health check endpoint"
                }
              }
            }
          }
        }
      },
      "definitions": {
        "TechServiceType": {
          "type": "string",
          "enum": [
            "infrastructure",
            "platform",
            "storage",
            "compute",
            "network"
          ]
        }
      }
    },
    "Artifact": {
      "type": "object",
      "description": "Physical piece of data used or produced",
      "required": [
        "id",
        "name",
        "artifactType"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string",
          "minLength": 1
        },
        "artifactType": {
          "$ref": "#/definitions/enum"
        },
        "properties": {
          "type": "object",
          "description": "Cross-layer properties",
          "properties": {
            "artifact": {
              "type": "object",
              "properties": {
                "format": {
                  "type": "string",
                  "description": "optional"
                },
                "size": {
                  "type": "string",
                  "description": "optional"
                }
              }
            },
            "spec": {
              "type": "object",
              "properties": {
                "database": {
                  "type": "string",
                  "description": "optional"
                }
              }
            },
            "security": {
              "type": "object",
              "properties": {
                "encryption-required": {
                  "type": "string",
                  "description": "optional"
                },
                "encryption-type": {
                  "type": "string",
                  "description": "optional"
                },
                "classification": {
                  "type": "string",
                  "description": "optional"
                },
                "pii": {
                  "type": "string",
                  "description": "optional, contains personally identifiable information"
                }
              }
            },
            "motivation": {
              "type": "object",
              "properties": {
                "constrained-by": {
                  "allOf": [
                    {
                      "$ref": "common/relationships.schema.json#/definitions/MotivationProperties/properties/constrained-by"
                    }
                  ]
                }
              }
            }
          }
        }
      },
      "definitions": {
        "ArtifactType": {
          "type": "string",
          "enum": [
            "database",
            "file",
            "configuration",
            "binary",
            "log",
            "backup"
          ]
        }
      }
    }
  },
  "$defs": {
    "relationships": {
      "$ref": "common/relationships.schema.json#/definitions"
    },
    "predicates": {
      "$ref": "common/predicates.schema.json#/definitions"
    }
  }
}
