{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://example.com/schemas/05-technology-layer.json",
  "title": "Technology Layer Schema",
  "description": "ArchiMate Technology Layer elements for infrastructure, nodes, and technology services",
  "type": "object",
  "properties": {
    "nodes": {
      "type": "array",
      "items": { "$ref": "#/definitions/Node" }
    },
    "devices": {
      "type": "array",
      "items": { "$ref": "#/definitions/Device" }
    },
    "systemSoftware": {
      "type": "array",
      "items": { "$ref": "#/definitions/SystemSoftware" }
    },
    "technologyCollaborations": {
      "type": "array",
      "items": { "$ref": "#/definitions/TechnologyCollaboration" }
    },
    "technologyInterfaces": {
      "type": "array",
      "items": { "$ref": "#/definitions/TechnologyInterface" }
    },
    "paths": {
      "type": "array",
      "items": { "$ref": "#/definitions/Path" }
    },
    "communicationNetworks": {
      "type": "array",
      "items": { "$ref": "#/definitions/CommunicationNetwork" }
    },
    "technologyFunctions": {
      "type": "array",
      "items": { "$ref": "#/definitions/TechnologyFunction" }
    },
    "technologyProcesses": {
      "type": "array",
      "items": { "$ref": "#/definitions/TechnologyProcess" }
    },
    "technologyInteractions": {
      "type": "array",
      "items": { "$ref": "#/definitions/TechnologyInteraction" }
    },
    "technologyEvents": {
      "type": "array",
      "items": { "$ref": "#/definitions/TechnologyEvent" }
    },
    "technologyServices": {
      "type": "array",
      "items": { "$ref": "#/definitions/TechnologyService" }
    },
    "artifacts": {
      "type": "array",
      "items": { "$ref": "#/definitions/Artifact" }
    },
    "relationships": {
      "type": "array",
      "items": { "$ref": "#/definitions/Relationship" }
    }
  },
  "definitions": {
    "Node": {
      "type": "object",
      "required": ["id", "name"],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        },
        "nodeType": {
          "type": "string",
          "enum": ["server", "container", "vm", "kubernetes-cluster", "serverless-function", "database-cluster"]
        },
        "properties": {
          "type": "object",
          "properties": {
            "node.provider": {
              "type": "string"
            },
            "node.instance-type": {
              "type": "string"
            },
            "node.region": {
              "type": "string"
            },
            "spec.terraform": {
              "type": "string"
            },
            "motivation.governed-by-principles": {
              "type": "string",
              "description": "Comma-separated Principle IDs (technology selection principles)"
            },
            "motivation.constrained-by": {
              "type": "string",
              "description": "Comma-separated Constraint IDs (budget, vendor, regulatory)"
            },
            "motivation.fulfills-requirements": {
              "type": "string",
              "description": "Comma-separated Requirement IDs (technical/non-functional)"
            }
          }
        }
      }
    },
    "Device": {
      "type": "object",
      "required": ["id", "name"],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        },
        "deviceType": {
          "type": "string",
          "enum": ["server", "workstation", "mobile", "iot-device", "network-device"]
        },
        "properties": {
          "type": "object",
          "properties": {
            "device.manufacturer": {
              "type": "string"
            },
            "device.model": {
              "type": "string"
            }
          }
        }
      }
    },
    "SystemSoftware": {
      "type": "object",
      "required": ["id", "name"],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        },
        "softwareType": {
          "type": "string",
          "enum": ["operating-system", "database", "middleware", "container-runtime", "web-server", "message-broker"]
        },
        "properties": {
          "type": "object",
          "properties": {
            "software.version": {
              "type": "string"
            },
            "software.license": {
              "type": "string",
              "enum": ["opensource", "commercial", "proprietary"]
            },
            "motivation.governed-by-principles": {
              "type": "string",
              "description": "Comma-separated Principle IDs (software selection principles)"
            },
            "motivation.constrained-by": {
              "type": "string",
              "description": "Comma-separated Constraint IDs (license, compliance)"
            },
            "motivation.fulfills-requirements": {
              "type": "string",
              "description": "Comma-separated Requirement IDs (security, compliance)"
            }
          }
        }
      }
    },
    "TechnologyCollaboration": {
      "type": "object",
      "required": ["id", "name", "nodes"],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        },
        "nodes": {
          "type": "array",
          "items": {
            "type": "string",
            "format": "uuid"
          },
          "minItems": 2
        }
      }
    },
    "TechnologyInterface": {
      "type": "object",
      "required": ["id", "name"],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        },
        "protocol": {
          "type": "string",
          "enum": ["HTTP", "HTTPS", "TCP", "UDP", "WebSocket", "AMQP", "MQTT", "SQL"]
        },
        "properties": {
          "type": "object",
          "properties": {
            "interface.port": {
              "type": "integer",
              "minimum": 1,
              "maximum": 65535
            },
            "interface.url": {
              "type": "string",
              "format": "uri"
            }
          }
        }
      }
    },
    "Path": {
      "type": "object",
      "required": ["id", "name"],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        },
        "pathType": {
          "type": "string",
          "enum": ["network", "vpn", "direct-connect", "internet"]
        },
        "properties": {
          "type": "object",
          "properties": {
            "path.bandwidth": {
              "type": "string"
            },
            "path.latency": {
              "type": "string"
            }
          }
        }
      }
    },
    "CommunicationNetwork": {
      "type": "object",
      "required": ["id", "name"],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        },
        "networkType": {
          "type": "string",
          "enum": ["lan", "wan", "vpn", "internet", "cdn"]
        },
        "properties": {
          "type": "object",
          "properties": {
            "network.cidr": {
              "type": "string"
            },
            "network.vlan": {
              "type": "string"
            },
            "motivation.governed-by-principles": {
              "type": "string",
              "description": "Comma-separated Principle IDs (network architecture principles)"
            },
            "motivation.constrained-by": {
              "type": "string",
              "description": "Comma-separated Constraint IDs (regulatory, data residency)"
            },
            "motivation.fulfills-requirements": {
              "type": "string",
              "description": "Comma-separated Requirement IDs (security, compliance)"
            }
          }
        }
      }
    },
    "TechnologyFunction": {
      "type": "object",
      "required": ["id", "name"],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        }
      }
    },
    "TechnologyProcess": {
      "type": "object",
      "required": ["id", "name"],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        },
        "properties": {
          "type": "object",
          "properties": {
            "process.automation": {
              "type": "string"
            }
          }
        }
      }
    },
    "TechnologyInteraction": {
      "type": "object",
      "required": ["id", "name"],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        }
      }
    },
    "TechnologyEvent": {
      "type": "object",
      "required": ["id", "name"],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        },
        "eventType": {
          "type": "string",
          "enum": ["startup", "shutdown", "failure", "scaling", "maintenance"]
        }
      }
    },
    "TechnologyService": {
      "type": "object",
      "required": ["id", "name"],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        },
        "serviceType": {
          "type": "string",
          "enum": ["infrastructure", "platform", "storage", "compute", "network"]
        },
        "properties": {
          "type": "object",
          "properties": {
            "service.sla": {
              "type": "string"
            },
            "service.monitoring": {
              "type": "string"
            },
            "motivation.supports-goals": {
              "type": "string",
              "description": "Comma-separated Goal IDs this service supports"
            },
            "motivation.governed-by-principles": {
              "type": "string",
              "description": "Comma-separated Principle IDs"
            },
            "motivation.constrained-by": {
              "type": "string",
              "description": "Comma-separated Constraint IDs"
            },
            "apm.sla-target-availability": {
              "type": "string",
              "description": "Target uptime percentage (e.g., '99.9%', '99.95%', '99.99%')"
            },
            "apm.sla-target-latency": {
              "type": "string",
              "description": "Target response time (e.g., '5ms', '10ms', '50ms')"
            },
            "apm.health-monitored": {
              "type": "string",
              "enum": ["true", "false"],
              "description": "Whether health is actively monitored"
            },
            "apm.health-check-endpoint": {
              "type": "string",
              "description": "Health check endpoint (e.g., '/health', '/readiness')"
            }
          }
        }
      }
    },
    "Artifact": {
      "type": "object",
      "required": ["id", "name"],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "documentation": {
          "type": "string"
        },
        "artifactType": {
          "type": "string",
          "enum": ["database", "file", "configuration", "binary", "log", "backup"]
        },
        "properties": {
          "type": "object",
          "properties": {
            "artifact.format": {
              "type": "string"
            },
            "artifact.size": {
              "type": "string"
            },
            "spec.database": {
              "type": "string"
            },
            "motivation.constrained-by": {
              "type": "string",
              "description": "Comma-separated Constraint IDs (retention, compliance)"
            }
          }
        }
      }
    },
    "Relationship": {
      "type": "object",
      "required": ["type", "source", "target"],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["Composition", "Assignment", "Realization", "Triggering", "Flow", "Access", "Association", "Serving", "Used By"]
        },
        "source": {
          "type": "string",
          "format": "uuid"
        },
        "target": {
          "type": "string",
          "format": "uuid"
        },
        "documentation": {
          "type": "string"
        }
      }
    }
  }
}
