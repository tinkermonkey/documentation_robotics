# AUTO-GENERATED: This file is automatically generated from route definitions.
# DO NOT EDIT MANUALLY - your changes will be overwritten.
# To regenerate this file, run: npm run generate:openapi from the cli/ directory.
# This ensures the spec is always in sync with the actual server implementation.

openapi: 3.1.0
info:
  title: Documentation Robotics Visualization Server API
  version: 0.1.0
  description: API specification for the DR CLI visualization server
  contact:
    name: Documentation Robotics
    url: https://github.com/tinkermonkey/documentation_robotics
  license:
    name: ISC
servers:
  - url: http://localhost:8080
    description: Local development server
components:
  schemas: {}
  parameters: {}
paths:
  /health:
    get:
      tags:
        - Health
      summary: Health check
      description: Check if the server is running and healthy
      responses:
        "200":
          description: Server is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    description: Server health status
                  version:
                    type: string
                    description: API version
                required:
                  - status
                  - version
  /api/model:
    get:
      tags:
        - Model
      summary: Get full model
      description: Retrieve the complete architecture model across all layers
      responses:
        "200":
          description: Model data retrieved successfully
          content:
            application/json:
              schema: {}
        "500":
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: Error message
                required:
                  - error
  /api/layers/:name:
    get:
      tags:
        - Model
      summary: Get layer
      description: Retrieve a specific layer with all its elements
      parameters:
        - schema:
            type: string
            enum:
              - motivation
              - business
              - security
              - application
              - technology
              - api
              - data-model
              - data-store
              - ux
              - navigation
              - apm
              - testing
          required: true
          name: name
          in: path
      responses:
        "200":
          description: Layer retrieved successfully
          content:
            application/json:
              schema: {}
        "404":
          description: Layer not found
          content:
            application/json:
              schema: {}
        "500":
          description: Server error
          content:
            application/json:
              schema: {}
  /api/elements/:id:
    get:
      tags:
        - Model
      summary: Get element
      description: Retrieve a specific architecture element with its metadata and
        annotations
      parameters:
        - schema:
            type: string
            minLength: 1
            pattern: ^[a-z][a-z0-9-]*[a-z0-9]\.[a-z][a-z0-9-]*[a-z0-9]\.[a-z][a-z0-9-]*[a-z0-9]$|^[a-z]\.[a-z]\.[a-z]$
          required: true
          name: id
          in: path
      responses:
        "200":
          description: Element retrieved successfully
          content:
            application/json:
              schema: {}
        "404":
          description: Element not found
          content:
            application/json:
              schema: {}
        "500":
          description: Server error
          content:
            application/json:
              schema: {}
  /api/spec:
    get:
      tags:
        - Schema
      summary: Get JSON schemas
      description: Retrieve all JSON Schema definitions used by the system
      responses:
        "200":
          description: Schemas retrieved successfully
          content:
            application/json:
              schema: {}
        "500":
          description: Server error
          content:
            application/json:
              schema: {}
  /api/annotations:
    get:
      tags:
        - Annotations
      summary: Get annotations
      description: Retrieve all annotations, optionally filtered by element
      parameters:
        - schema:
            type: string
            minLength: 1
            pattern: ^[a-z][a-z0-9-]*[a-z0-9]\.[a-z][a-z0-9-]*[a-z0-9]\.[a-z][a-z0-9-]*[a-z0-9]$|^[a-z]\.[a-z]\.[a-z]$
          required: false
          name: elementId
          in: query
        - schema:
            type: string
          required: false
          name: author
          in: query
        - schema:
            type: string
          required: false
          name: tags
          in: query
        - schema:
            type: string
            enum:
              - "true"
              - "false"
          required: false
          name: resolved
          in: query
      responses:
        "200":
          description: Annotations retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  annotations:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          description: Annotation ID
                        elementId:
                          type: string
                          minLength: 1
                          pattern: ^[a-z][a-z0-9-]*[a-z0-9]\.[a-z][a-z0-9-]*[a-z0-9]\.[a-z][a-z0-9-]*[a-z0-9]$|^[a-z]\.[a-z]\.[a-z]$
                          description: Target element ID
                        author:
                          type: string
                          description: Author name
                        content:
                          type: string
                          description: Annotation content
                        createdAt:
                          type: string
                          description: Creation timestamp
                        updatedAt:
                          type: string
                          description: Last update timestamp
                        tags:
                          type: array
                          items:
                            type: string
                          description: Annotation tags
                        resolved:
                          type: boolean
                          description: Resolution status
                        replies:
                          type: array
                          items:
                            type: object
                            properties:
                              id:
                                type: string
                              author:
                                type: string
                              content:
                                type: string
                              createdAt:
                                type: string
                            required:
                              - id
                              - author
                              - content
                              - createdAt
                          description: Annotation replies
                      required:
                        - id
                        - elementId
                        - author
                        - content
                        - createdAt
                    description: List of annotations
                required:
                  - annotations
    post:
      tags:
        - Annotations
      summary: Create annotation
      description: Create a new annotation on a model element
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                elementId:
                  type: string
                  minLength: 1
                  pattern: ^[a-z][a-z0-9-]*[a-z0-9]\.[a-z][a-z0-9-]*[a-z0-9]\.[a-z][a-z0-9-]*[a-z0-9]$|^[a-z]\.[a-z]\.[a-z]$
                author:
                  type: string
                  maxLength: 100
                  default: Anonymous
                content:
                  type: string
                  minLength: 1
                  maxLength: 5000
                tags:
                  type: array
                  items:
                    type: string
                    minLength: 1
                    maxLength: 50
                    pattern: ^[a-z0-9][a-z0-9-]*[a-z0-9]$|^[a-z0-9]$
                  default: []
              required:
                - elementId
                - content
              additionalProperties: false
      responses:
        "201":
          description: Annotation created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    description: Annotation ID
                  elementId:
                    type: string
                    minLength: 1
                    pattern: ^[a-z][a-z0-9-]*[a-z0-9]\.[a-z][a-z0-9-]*[a-z0-9]\.[a-z][a-z0-9-]*[a-z0-9]$|^[a-z]\.[a-z]\.[a-z]$
                    description: Target element ID
                  author:
                    type: string
                    description: Author name
                  content:
                    type: string
                    description: Annotation content
                  createdAt:
                    type: string
                    description: Creation timestamp
                  updatedAt:
                    type: string
                    description: Last update timestamp
                  tags:
                    type: array
                    items:
                      type: string
                    description: Annotation tags
                  resolved:
                    type: boolean
                    description: Resolution status
                  replies:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        author:
                          type: string
                        content:
                          type: string
                        createdAt:
                          type: string
                      required:
                        - id
                        - author
                        - content
                        - createdAt
                    description: Annotation replies
                required:
                  - id
                  - elementId
                  - author
                  - content
                  - createdAt
        "400":
          description: Invalid request body
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: Error message
                required:
                  - error
        "404":
          description: Element not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: Error message
                required:
                  - error
        "500":
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: Error message
                required:
                  - error
  /api/annotations/:annotationId:
    put:
      tags:
        - Annotations
      summary: Update annotation
      description: Update an existing annotation (full update)
      parameters:
        - schema:
            type: string
            minLength: 1
            pattern: ^[a-z0-9_-]+$
          required: true
          name: annotationId
          in: path
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                content:
                  type: string
                  minLength: 1
                  maxLength: 5000
                tags:
                  type: array
                  items:
                    type: string
                    minLength: 1
                    maxLength: 50
                    pattern: ^[a-z0-9][a-z0-9-]*[a-z0-9]$|^[a-z0-9]$
                resolved:
                  type: boolean
              additionalProperties: false
      responses:
        "200":
          description: Annotation updated successfully
          content:
            application/json:
              schema: {}
        "404":
          description: Annotation not found
          content:
            application/json:
              schema: {}
        "500":
          description: Server error
          content:
            application/json:
              schema: {}
    patch:
      tags:
        - Annotations
      summary: Partially update annotation
      description: Partially update an existing annotation (recommended over PUT)
      parameters:
        - schema:
            type: string
            minLength: 1
            pattern: ^[a-z0-9_-]+$
          required: true
          name: annotationId
          in: path
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                content:
                  type: string
                  minLength: 1
                  maxLength: 5000
                tags:
                  type: array
                  items:
                    type: string
                    minLength: 1
                    maxLength: 50
                    pattern: ^[a-z0-9][a-z0-9-]*[a-z0-9]$|^[a-z0-9]$
                resolved:
                  type: boolean
              additionalProperties: false
      responses:
        "200":
          description: Annotation updated successfully
          content:
            application/json:
              schema: {}
        "404":
          description: Annotation not found
          content:
            application/json:
              schema: {}
        "500":
          description: Server error
          content:
            application/json:
              schema: {}
    delete:
      tags:
        - Annotations
      summary: Delete annotation
      description: Delete an existing annotation
      parameters:
        - schema:
            type: string
            minLength: 1
            pattern: ^[a-z0-9_-]+$
          required: true
          name: annotationId
          in: path
      responses:
        "204":
          description: Annotation deleted successfully
        "404":
          description: Annotation not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: Error message
                required:
                  - error
        "500":
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: Error message
                required:
                  - error
  /api/annotations/:annotationId/replies:
    get:
      tags:
        - Annotations
      summary: Get annotation replies
      description: Retrieve all replies to an annotation
      parameters:
        - schema:
            type: string
            minLength: 1
            pattern: ^[a-z0-9_-]+$
          required: true
          name: annotationId
          in: path
      responses:
        "200":
          description: Replies retrieved successfully
          content:
            application/json:
              schema: {}
        "404":
          description: Annotation not found
          content:
            application/json:
              schema: {}
    post:
      tags:
        - Annotations
      summary: Create annotation reply
      description: Add a reply to an annotation
      parameters:
        - schema:
            type: string
            minLength: 1
            pattern: ^[a-z0-9_-]+$
          required: true
          name: annotationId
          in: path
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                author:
                  type: string
                  minLength: 1
                  maxLength: 100
                content:
                  type: string
                  minLength: 1
                  maxLength: 5000
              required:
                - author
                - content
              additionalProperties: false
      responses:
        "201":
          description: Reply created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    description: Reply ID
                  author:
                    type: string
                    description: Author name
                  content:
                    type: string
                    description: Reply content
                  createdAt:
                    type: string
                    description: Creation timestamp
                required:
                  - id
                  - author
                  - content
                  - createdAt
        "404":
          description: Annotation not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: Error message
                required:
                  - error
        "500":
          description: Server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    description: Error message
                required:
                  - error
  /api/changesets:
    get:
      tags:
        - Changesets
      summary: Get changesets
      description: Retrieve a list of all changesets
      responses:
        "200":
          description: Changesets retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  version:
                    type: string
                  changesets:
                    type: object
                    additionalProperties:
                      type: object
                      properties:
                        id:
                          type: string
                        name:
                          type: string
                        status:
                          type: string
                          enum:
                            - active
                            - applied
                            - abandoned
                        type:
                          type: string
                          enum:
                            - feature
                            - bugfix
                            - exploration
                        created_at:
                          type: string
                        elements_count:
                          type: number
                      required:
                        - id
                        - name
                        - status
                        - type
                        - created_at
                        - elements_count
                required:
                  - version
                  - changesets
  /api/changesets/:changesetId:
    get:
      tags:
        - Changesets
      summary: Get changeset
      description: Retrieve a specific changeset with all its changes
      parameters:
        - schema:
            type: string
            minLength: 1
            pattern: ^[a-z0-9_-]+$
          required: true
          name: changesetId
          in: path
      responses:
        "200":
          description: Changeset retrieved successfully
          content:
            application/json:
              schema: {}
        "404":
          description: Changeset not found
          content:
            application/json:
              schema: {}
webhooks: {}

