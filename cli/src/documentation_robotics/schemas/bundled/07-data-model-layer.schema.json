{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://example.com/schemas/07-data-model-layer.schema.json",
  "title": "Data Model Layer Schema",
  "description": "Schema for Data Model Layer",
  "type": "object",
  "properties": {
    "json-schemas": {
      "type": "array",
      "description": "Collection of JSONSchema entities",
      "items": {
        "$ref": "#/definitions/JSONSchema"
      }
    },
    "json-types": {
      "type": "array",
      "description": "Collection of JSONType entities",
      "items": {
        "$ref": "#/definitions/JSONType"
      }
    },
    "string-schemas": {
      "type": "array",
      "description": "Collection of StringSchema entities",
      "items": {
        "$ref": "#/definitions/StringSchema"
      }
    },
    "numeric-schemas": {
      "type": "array",
      "description": "Collection of NumericSchema entities",
      "items": {
        "$ref": "#/definitions/NumericSchema"
      }
    },
    "array-schemas": {
      "type": "array",
      "description": "Collection of ArraySchema entities",
      "items": {
        "$ref": "#/definitions/ArraySchema"
      }
    },
    "object-schemas": {
      "type": "array",
      "description": "Collection of ObjectSchema entities",
      "items": {
        "$ref": "#/definitions/ObjectSchema"
      }
    },
    "schema-compositions": {
      "type": "array",
      "description": "Collection of SchemaComposition entities",
      "items": {
        "$ref": "#/definitions/SchemaComposition"
      }
    },
    "references": {
      "type": "array",
      "description": "Collection of Reference entities",
      "items": {
        "$ref": "#/definitions/Reference"
      }
    },
    "x-business-object-refs": {
      "type": "array",
      "description": "Collection of x-business-object-ref entities",
      "items": {
        "$ref": "#/definitions/x-business-object-ref"
      }
    },
    "x-data-governances": {
      "type": "array",
      "description": "Collection of x-data-governance entities",
      "items": {
        "$ref": "#/definitions/x-data-governance"
      }
    },
    "x-apm-data-quality-metricses": {
      "type": "array",
      "description": "Collection of x-apm-data-quality-metrics entities",
      "items": {
        "$ref": "#/definitions/x-apm-data-quality-metrics"
      }
    },
    "x-databases": {
      "type": "array",
      "description": "Collection of x-database entities",
      "items": {
        "$ref": "#/definitions/x-database"
      }
    },
    "x-uis": {
      "type": "array",
      "description": "Collection of x-ui entities",
      "items": {
        "$ref": "#/definitions/x-ui"
      }
    },
    "x-securities": {
      "type": "array",
      "description": "Collection of x-security entities",
      "items": {
        "$ref": "#/definitions/x-security"
      }
    }
  },
  "definitions": {
    "JSONSchema": {
      "type": "object",
      "description": "Root schema document",
      "required": [
        "id",
        "name",
        "$schema",
        "$id",
        "type"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "$schema": {
          "type": "string",
          "minLength": 1
        },
        "$id": {
          "type": "string",
          "minLength": 1
        },
        "title": {
          "type": "string",
          "minLength": 1
        },
        "description": {
          "type": "string",
          "minLength": 1
        },
        "type": {
          "type": "string",
          "minLength": 1
        },
        "definitions": {
          "type": "array",
          "description": "Contains relationship",
          "items": {
            "type": "string"
          }
        },
        "properties": {
          "type": "array",
          "description": "Contains relationship",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "JSONType": {
      "type": "object",
      "description": "Core JSON data types",
      "required": [],
      "properties": {}
    },
    "StringSchema": {
      "type": "object",
      "description": "StringSchema validation rules",
      "required": [],
      "properties": {},
      "definitions": {
        "StringFormat": {
          "type": "string",
          "enum": [
            "date-time",
            "date",
            "time",
            "email",
            "idn-email",
            "hostname",
            "idn-hostname",
            "ipv4",
            "ipv6",
            "uri",
            "uri-reference",
            "iri",
            "iri-reference",
            "json-pointer",
            "relative-json-pointer",
            "regex",
            "uuid",
            "phone",
            "credit-card"
          ]
        }
      }
    },
    "NumericSchema": {
      "type": "object",
      "description": "NumericSchema validation rules",
      "required": [],
      "properties": {}
    },
    "ArraySchema": {
      "type": "object",
      "description": "ArraySchema validation rules",
      "required": [],
      "properties": {}
    },
    "ObjectSchema": {
      "type": "object",
      "description": "ObjectSchema validation rules",
      "required": [],
      "properties": {
        "properties": {
          "type": "array",
          "description": "Contains relationship",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "SchemaComposition": {
      "type": "object",
      "description": "Combining multiple schemas",
      "required": [
        "id",
        "name"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        }
      }
    },
    "Reference": {
      "type": "object",
      "description": "Reference to another schema",
      "required": [
        "id",
        "name"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        }
      }
    },
    "x-business-object-ref": {
      "type": "object",
      "description": "Reference to BusinessObject this schema implements",
      "required": [],
      "properties": {}
    },
    "x-data-governance": {
      "type": "object",
      "description": "Data model governance metadata (root-level)",
      "required": [
        "id",
        "name"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "governedBy": {
          "type": "object"
        }
      }
    },
    "x-apm-data-quality-metrics": {
      "type": "object",
      "description": "Links schema to data quality metrics in APM/Observability Layer",
      "required": [
        "id",
        "name",
        "completenessMetrics",
        "accuracyMetrics",
        "consistencyMetrics",
        "freshnessMetrics",
        "uniquenessMetrics",
        "integrityMetrics"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "completenessMetrics": {
          "type": "string",
          "minLength": 1
        },
        "accuracyMetrics": {
          "type": "string",
          "minLength": 1
        },
        "consistencyMetrics": {
          "type": "string",
          "minLength": 1
        },
        "freshnessMetrics": {
          "type": "string",
          "minLength": 1
        },
        "uniquenessMetrics": {
          "type": "string",
          "minLength": 1
        },
        "integrityMetrics": {
          "type": "string",
          "minLength": 1
        }
      }
    },
    "x-database": {
      "type": "object",
      "description": "Database mapping information",
      "required": [
        "id",
        "name",
        "table",
        "schema",
        "engine"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "table": {
          "type": "string",
          "minLength": 1
        },
        "schema": {
          "type": "string",
          "minLength": 1
        },
        "engine": {
          "type": "string",
          "minLength": 1
        }
      },
      "definitions": {
        "SQLType": {
          "type": "string",
          "enum": [
            "VARCHAR",
            "TEXT",
            "INTEGER",
            "BIGINT",
            "SERIAL",
            "BIGSERIAL",
            "DECIMAL",
            "NUMERIC",
            "BOOLEAN",
            "DATE",
            "TIMESTAMP",
            "TIMESTAMPTZ",
            "JSON",
            "JSONB",
            "UUID",
            "BYTEA"
          ]
        },
        "ReferentialAction": {
          "type": "string",
          "enum": [
            "CASCADE",
            "SET_NULL",
            "RESTRICT",
            "NO_ACTION",
            "SET_DEFAULT"
          ]
        },
        "IndexType": {
          "type": "string",
          "enum": [
            "BTREE",
            "HASH",
            "GIN",
            "GIST"
          ]
        },
        "ConstraintType": {
          "type": "string",
          "enum": [
            "PRIMARY_KEY",
            "UNIQUE",
            "FOREIGN_KEY",
            "CHECK"
          ]
        }
      }
    },
    "x-ui": {
      "type": "object",
      "description": "UI rendering hints",
      "required": [
        "id",
        "name",
        "component",
        "label",
        "placeholder",
        "helpText",
        "order",
        "readOnly",
        "hidden",
        "group"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "component": {
          "$ref": "#/definitions/enum"
        },
        "label": {
          "type": "string",
          "minLength": 1
        },
        "placeholder": {
          "type": "string",
          "minLength": 1
        },
        "helpText": {
          "type": "string",
          "minLength": 1
        },
        "order": {
          "type": "integer"
        },
        "readOnly": {
          "type": "boolean"
        },
        "hidden": {
          "type": "boolean"
        },
        "group": {
          "type": "string",
          "minLength": 1
        }
      },
      "definitions": {
        "UIComponent": {
          "type": "string",
          "enum": [
            "text-input",
            "textarea",
            "number-input",
            "email-input",
            "password-input",
            "date-picker",
            "datetime-picker",
            "select",
            "multi-select",
            "autocomplete",
            "checkbox",
            "radio-group",
            "toggle",
            "slider",
            "file-upload",
            "rich-text-editor",
            "color-picker"
          ]
        }
      }
    },
    "x-security": {
      "type": "object",
      "description": "Security and privacy metadata",
      "required": [
        "id",
        "name",
        "pii",
        "encrypted",
        "classification",
        "retention",
        "masking",
        "redaction"
      ],
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid",
          "minLength": 1
        },
        "name": {
          "type": "string",
          "minLength": 1
        },
        "pii": {
          "type": "boolean"
        },
        "encrypted": {
          "type": "boolean"
        },
        "classification": {
          "$ref": "#/definitions/enum"
        },
        "retention": {
          "type": "string",
          "minLength": 1
        },
        "masking": {
          "$ref": "#/definitions/enum"
        },
        "redaction": {
          "type": "boolean"
        }
      },
      "definitions": {
        "SecurityClassification": {
          "type": "string",
          "enum": [
            "public",
            "internal",
            "confidential",
            "restricted"
          ]
        },
        "MaskingStrategy": {
          "type": "string",
          "enum": [
            "none",
            "partial",
            "full",
            "hash"
          ]
        }
      }
    }
  }
}
