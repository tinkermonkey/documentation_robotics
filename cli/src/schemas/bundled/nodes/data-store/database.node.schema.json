{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Database",
  "description": "A database instance representing a top-level data store deployment. Paradigm-neutral: covers relational databases, document stores, key-value stores, wide-column stores, vector databases, time-series databases, graph databases, search engines, and multi-model systems.",
  "allOf": [
    {
      "$ref": "../../base/spec-node.schema.json"
    }
  ],
  "properties": {
    "spec_node_id": {
      "const": "data-store.database"
    },
    "layer_id": {
      "const": "data-store"
    },
    "type": {
      "const": "database"
    },
    "attributes": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "format": "uuid"
        },
        "name": {
          "type": "string"
        },
        "engine": {
          "type": "string",
          "description": "Database engine name (e.g., 'PostgreSQL', 'MongoDB', 'Redis', 'Cassandra', 'Pinecone', 'Neo4j', 'Elasticsearch', 'InfluxDB', 'DynamoDB'). Free-text to accommodate any engine without enumeration constraints."
        },
        "paradigm": {
          "type": "string",
          "enum": [
            "RELATIONAL",
            "DOCUMENT",
            "KEY_VALUE",
            "WIDE_COLUMN",
            "VECTOR",
            "TIME_SERIES",
            "GRAPH",
            "SEARCH_ENGINE",
            "MULTI_MODEL"
          ],
          "description": "Primary data model paradigm. RELATIONAL: SQL-based tabular data (PostgreSQL, MySQL, Oracle). DOCUMENT: JSON/BSON document storage (MongoDB, CouchDB, Firestore). KEY_VALUE: simple key-to-value mapping (Redis, DynamoDB, etcd). WIDE_COLUMN: column-family storage (Cassandra, HBase, Bigtable). VECTOR: vector embedding storage and similarity search (Pinecone, Weaviate, Qdrant). TIME_SERIES: time-indexed measurements (InfluxDB, TimescaleDB). GRAPH: nodes and edges with traversal (Neo4j, Neptune). SEARCH_ENGINE: full-text search and analytics (Elasticsearch, OpenSearch). MULTI_MODEL: natively supports multiple paradigms (ArangoDB, CosmosDB, FaunaDB)."
        },
        "version": {
          "type": "string"
        },
        "charset": {
          "type": "string"
        },
        "collation": {
          "type": "string"
        },
        "deploymentModel": {
          "type": "string",
          "enum": ["STANDALONE", "REPLICATED", "SHARDED", "DISTRIBUTED", "SERVERLESS", "EMBEDDED"],
          "description": "How the database is deployed. STANDALONE: single instance. REPLICATED: primary with read replicas. SHARDED: data partitioned across nodes. DISTRIBUTED: fully distributed with no single primary. SERVERLESS: cloud-managed auto-scaling. EMBEDDED: in-process database (SQLite, RocksDB)."
        },
        "namespaces": {
          "type": "array",
          "description": "Contains relationship to namespaces within this database"
        }
      },
      "required": ["engine", "paradigm"],
      "additionalProperties": false
    }
  }
}
