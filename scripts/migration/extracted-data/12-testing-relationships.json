{
  "layerMetadata": {
    "layerId": "12-testing",
    "layerName": "12 Testing",
    "intraLayerRelationshipSupport": true,
    "crossLayerRelationshipSupport": true,
    "relationshipCatalogVersion": "2.1.0"
  },
  "intraLayerRelationships": {
    "$comment": "Relationships between entities within this layer. References relationship-catalog.json by ID.",
    "allowed": [
      {
        "relationshipTypeId": "composition",
        "sourceTypes": ["CoverageRequirement", "TestCoverageModel", "TestCoverageTarget"],
        "targetTypes": ["InputPartitionSelection", "OutcomeCategory", "TestCoverageTarget"],
        "examples": [
          {
            "source": "TestCoverageModel",
            "target": "TestCoverageTarget",
            "description": "Coverage model composes targets defining what needs testing"
          },
          {
            "source": "TestCoverageTarget",
            "target": "OutcomeCategory",
            "description": "Coverage target composes expected outcome categories"
          },
          {
            "source": "CoverageRequirement",
            "target": "InputPartitionSelection",
            "description": "Coverage requirement composes partition value selections"
          }
        ]
      },
      {
        "relationshipTypeId": "aggregation",
        "sourceTypes": ["CoverageRequirement", "InputPartitionSelection"],
        "targetTypes": ["ContextVariation", "PartitionValue"],
        "examples": [
          {
            "source": "InputPartitionSelection",
            "target": "PartitionValue",
            "description": "Partition selection aggregates multiple partition values to cover"
          },
          {
            "source": "CoverageRequirement",
            "target": "ContextVariation",
            "description": "Requirement aggregates selected contexts for testing"
          }
        ]
      },
      {
        "relationshipTypeId": "triggering",
        "sourceTypes": ["CoverageGap", "PartitionDependency"],
        "targetTypes": ["CoverageRequirement", "PartitionValue"],
        "examples": [
          {
            "source": "PartitionDependency",
            "target": "PartitionValue",
            "description": "Dependency condition triggers inclusion/exclusion of partition values"
          },
          {
            "source": "CoverageGap",
            "target": "CoverageRequirement",
            "description": "Identified gap triggers need for additional coverage"
          }
        ]
      },
      {
        "relationshipTypeId": "flow",
        "sourceTypes": ["CoverageRequirement", "TestCoverageTarget"],
        "targetTypes": ["CoverageRequirement", "TestCaseSketch"],
        "examples": [
          {
            "source": "TestCoverageTarget",
            "target": "CoverageRequirement",
            "description": "Target flows to requirements that specify its coverage"
          },
          {
            "source": "CoverageRequirement",
            "target": "TestCaseSketch",
            "description": "Requirement flows to sketches that implement it"
          }
        ]
      },
      {
        "relationshipTypeId": "serving",
        "sourceTypes": ["ContextVariation", "InputSpacePartition"],
        "targetTypes": ["TestCoverageTarget"],
        "examples": [
          {
            "source": "InputSpacePartition",
            "target": "TestCoverageTarget",
            "description": "Partition serves target by defining testable input space"
          },
          {
            "source": "ContextVariation",
            "target": "TestCoverageTarget",
            "description": "Context serves target by defining execution environments"
          }
        ]
      },
      {
        "relationshipTypeId": "access",
        "sourceTypes": ["CoverageRequirement", "TestCaseSketch"],
        "targetTypes": ["InputPartitionSelection", "InputSelection"],
        "examples": [
          {
            "source": "TestCaseSketch",
            "target": "InputSelection",
            "description": "Test sketch accesses input selections for test execution"
          },
          {
            "source": "CoverageRequirement",
            "target": "InputPartitionSelection",
            "description": "Requirement accesses partition selections for coverage"
          }
        ]
      },
      {
        "relationshipTypeId": "reference",
        "sourceTypes": ["CoverageRequirement", "InputSelection", "TestCaseSketch"],
        "targetTypes": ["CoverageRequirement", "PartitionValue", "TestCoverageTarget"],
        "examples": [
          {
            "source": "TestCaseSketch",
            "target": "CoverageRequirement",
            "description": "Test case sketch references coverage requirement it satisfies"
          },
          {
            "source": "CoverageRequirement",
            "target": "TestCoverageTarget",
            "description": "Coverage requirement references target it covers"
          },
          {
            "source": "InputSelection",
            "target": "PartitionValue",
            "description": "Input selection references selected partition value"
          }
        ]
      },
      {
        "relationshipTypeId": "depends-on",
        "sourceTypes": ["CoverageRequirement", "TestCaseSketch"],
        "targetTypes": ["ContextVariation", "InputSpacePartition", "OutcomeCategory"],
        "examples": [
          {
            "source": "TestCaseSketch",
            "target": "ContextVariation",
            "description": "Test sketch depends on context for execution environment"
          },
          {
            "source": "TestCaseSketch",
            "target": "OutcomeCategory",
            "description": "Test sketch depends on expected outcome category"
          },
          {
            "source": "CoverageRequirement",
            "target": "InputSpacePartition",
            "description": "Requirement depends on partitions for coverage criteria"
          }
        ]
      },
      {
        "relationshipTypeId": "validates",
        "sourceTypes": ["TargetCoverageSummary", "TestCaseSketch"],
        "targetTypes": ["CoverageRequirement", "TestCoverageTarget"],
        "examples": [
          {
            "source": "TestCaseSketch",
            "target": "CoverageRequirement",
            "description": "Test sketch validates requirement is satisfied"
          },
          {
            "source": "TargetCoverageSummary",
            "target": "TestCoverageTarget",
            "description": "Summary validates coverage completeness of target"
          }
        ]
      }
    ]
  },
  "crossLayerRelationships": {
    "$comment": "Relationships to/from entities in other layers",
    "outgoing": [
      {
        "id": "motivation-governed-by-principles",
        "predicate": "governed-by-principles",
        "inversePredicate": "governs",
        "targetLayer": "01-motivation",
        "targetTypes": ["GovernedByPrinciple"],
        "sourceTypes": [
          "ApplicationFunction",
          "ApplicationService",
          "BusinessService",
          "CommunicationNetwork",
          "Node",
          "OpenAPIDocument",
          "Operation",
          "SecurityScheme",
          "SystemSoftware",
          "TechnologyService"
        ],
        "fieldPath": "motivation.governed-by-principles",
        "cardinality": "array",
        "format": "reference",
        "strength": "high",
        "required": false,
        "description": "BusinessService governed by Principles",
        "examples": [
          {
            "elementType": "BusinessService",
            "elementId": "order-service",
            "elementName": "Order Processing Service",
            "fieldPath": "motivation.governed-by-principles",
            "value": "principle-customer-first,principle-automation",
            "layer": "02-business"
          },
          {
            "elementType": "ApplicationService",
            "elementId": "product-service",
            "elementName": "product-service",
            "fieldPath": "motivation.governed-by-principles",
            "value": "principle-api-first,principle-cloud-native",
            "layer": "04-application"
          },
          {
            "elementType": "Node",
            "elementId": "k8s-cluster",
            "elementName": "k8s-cluster",
            "fieldPath": "motivation.governed-by-principles",
            "value": "principle-cloud-native,principle-auto-scaling",
            "layer": "05-technology"
          }
        ]
      },
      {
        "id": "motivation-supports-goals",
        "predicate": "supports-goals",
        "inversePredicate": "supported-by",
        "targetLayer": "01-motivation",
        "targetTypes": ["SupportsGoal"],
        "sourceTypes": [
          "ApplicationService",
          "BusinessService",
          "Operation",
          "SecurityScheme",
          "TechnologyService"
        ],
        "fieldPath": "motivation.supports-goals",
        "cardinality": "array",
        "format": "reference",
        "strength": "high",
        "required": false,
        "description": "BusinessService supports Goals",
        "examples": [
          {
            "elementType": "BusinessService",
            "elementId": "order-service",
            "elementName": "Order Processing Service",
            "fieldPath": "motivation.supports-goals",
            "value": "goal-customer-satisfaction,goal-revenue-growth",
            "layer": "02-business"
          },
          {
            "elementType": "ApplicationService",
            "elementId": "product-service",
            "elementName": "product-service",
            "fieldPath": "motivation.supports-goals",
            "value": "goal-product-catalog-accuracy,goal-customer-satisfaction",
            "layer": "04-application"
          },
          {
            "elementType": "TechnologyService",
            "elementId": "container-platform",
            "elementName": "container-platform",
            "fieldPath": "motivation.supports-goals",
            "value": "goal-deployment-automation,goal-horizontal-scaling",
            "layer": "05-technology"
          }
        ]
      },
      {
        "id": "security-classification",
        "predicate": "classification",
        "inversePredicate": null,
        "targetLayer": "03-security",
        "targetTypes": ["Classification"],
        "sourceTypes": ["Artifact"],
        "fieldPath": "security.classification",
        "cardinality": "single",
        "format": "string",
        "strength": "low",
        "required": false,
        "description": "Links to Classification in target layer",
        "examples": [
          {
            "elementType": "Artifact",
            "elementId": "product-db",
            "elementName": "product-db",
            "fieldPath": "security.classification",
            "value": "internal",
            "layer": "05-technology"
          },
          {
            "elementType": "Artifact",
            "elementId": "customer-db",
            "elementName": "customer-db",
            "fieldPath": "security.classification",
            "value": "restricted",
            "layer": "05-technology"
          }
        ]
      }
    ],
    "incoming": []
  }
}
